var pxsim,__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(c){var t;(t=c.input||(c.input={})).onGesture=function(t,e){var i=c.accelerometer();i.accelerometer.activate(),11!=t||i.useShake||(i.useShake=!0,c.runtime.queueDisplayUpdate()),c.pxtcore.registerWithDal(13,t,e)},t.rotation=function(t){var e=c.accelerometer().accelerometer;e.activate();var i=e.getX(c.MicroBitCoordinateSystem.NORTH_EAST_DOWN),n=e.getY(c.MicroBitCoordinateSystem.NORTH_EAST_DOWN),s=e.getZ(c.MicroBitCoordinateSystem.NORTH_EAST_DOWN),r=Math.atan2(n,s),a=Math.atan(-i/(n*Math.sin(r)+s*Math.cos(r))),o=0;switch(t){case 0:o=a;break;case 1:o=r}return Math.floor(o/Math.PI*180)},t.setAccelerometerRange=function(t){c.accelerometer().accelerometer.setSampleRange(t)},t.acceleration=function(t){var e=c.accelerometer().accelerometer;switch(e.activate(),t){case 0:return e.getX();case 1:return e.getY();case 2:return e.getZ();default:return Math.floor(Math.sqrt(e.instantaneousAccelerationSquared()))}}}(pxsim||(pxsim={})),function(n){var s,t;(t=s=n.MicroBitCoordinateSystem||(n.MicroBitCoordinateSystem={}))[t.RAW=0]="RAW",t[t.SIMPLE_CARTESIAN=1]="SIMPLE_CARTESIAN",t[t.NORTH_EAST_DOWN=2]="NORTH_EAST_DOWN";var e=function(){function t(t){this.runtime=t,this.sigma=0,this.lastGesture=0,this.currentGesture=0,this.sample={x:0,y:0,z:-1023},this.shake={x:!1,y:!1,z:!1,count:0,shaken:0,timer:0},this.isActive=!1,this.sampleRange=2,this.id=5}return t.prototype.setSampleRange=function(t){this.activate(),this.sampleRange=Math.max(1,Math.min(8,t))},t.prototype.activate=function(){this.isActive||(this.isActive=!0,this.runtime.queueDisplayUpdate())},t.prototype.update=function(t,e,i){this.sample.x=Math.floor(t),this.sample.y=Math.floor(e),this.sample.z=Math.floor(i),this.updateGesture(),n.board().bus.queue(this.id,1)},t.prototype.instantaneousAccelerationSquared=function(){return this.sample.x*this.sample.x+this.sample.y*this.sample.y+this.sample.z*this.sample.z},t.prototype.instantaneousPosture=function(){var t=this.instantaneousAccelerationSquared(),e=!1;if((this.getX()<-400&&this.shake.x||400<this.getX()&&!this.shake.x)&&(e=!0,this.shake.x=!this.shake.x),(this.getY()<-400&&this.shake.y||400<this.getY()&&!this.shake.y)&&(e=!0,this.shake.y=!this.shake.y),(this.getZ()<-400&&this.shake.z||400<this.getZ()&&!this.shake.z)&&(e=!0,this.shake.z=!this.shake.z),e&&this.shake.count<4&&4==++this.shake.count&&(this.shake.shaken=1),10<=++this.shake.timer&&(this.shake.timer=0)<this.shake.count&&0==--this.shake.count&&(this.shake.shaken=0),this.shake.shaken)return 11;var i=function(t){return t*t};return t<i(400)?7:t>i(3072)?8:t>i(6144)?9:t>i(8192)?10:this.getX()<-800?3:800<this.getX()?4:this.getY()<-800?1:800<this.getY()?2:this.getZ()<-800?5:800<this.getZ()?6:0},t.prototype.updateGesture=function(){var t=this.instantaneousPosture();t==this.currentGesture?this.sigma<5&&this.sigma++:(this.currentGesture=t,this.sigma=0),this.currentGesture!=this.lastGesture&&5<=this.sigma&&(this.lastGesture=this.currentGesture,n.board().bus.queue(13,this.lastGesture))},t.prototype.getX=function(t){var e;switch(void 0===t&&(t=s.SIMPLE_CARTESIAN),this.activate(),t){case s.SIMPLE_CARTESIAN:e=-this.sample.x;case s.NORTH_EAST_DOWN:e=this.sample.y;default:e=this.sample.x}return n.board().invertAccelerometerXAxis?-1*e:e},t.prototype.getY=function(t){var e;switch(void 0===t&&(t=s.SIMPLE_CARTESIAN),this.activate(),t){case s.SIMPLE_CARTESIAN:e=-this.sample.y;case s.NORTH_EAST_DOWN:e=-this.sample.x;default:e=this.sample.y}return n.board().invertAccelerometerYAxis?-1*e:e},t.prototype.getZ=function(t){var e;switch(void 0===t&&(t=s.SIMPLE_CARTESIAN),this.activate(),t){case s.NORTH_EAST_DOWN:e=-this.sample.z;default:e=this.sample.z}return n.board().invertAccelerometerZAxis?-1*e:e},t.prototype.getPitch=function(){return this.activate(),Math.floor(360*this.getPitchRadians()/(2*Math.PI))},t.prototype.getPitchRadians=function(){return this.recalculatePitchRoll(),this.pitch},t.prototype.getRoll=function(){return this.activate(),Math.floor(360*this.getRollRadians()/(2*Math.PI))},t.prototype.getRollRadians=function(){return this.recalculatePitchRoll(),this.roll},t.prototype.recalculatePitchRoll=function(){var t=this.getX(s.NORTH_EAST_DOWN),e=this.getY(s.NORTH_EAST_DOWN),i=this.getZ(s.NORTH_EAST_DOWN);this.roll=Math.atan2(e,i),this.pitch=Math.atan(-t/(e*Math.sin(this.roll)+i*Math.cos(this.roll)))},t}();n.Accelerometer=e;var i=function(){function t(t){this.useShake=!1,this.tiltDecayer=0,this.accelerometer=new e(t)}return t.prototype.attachEvents=function(c){var h=this;this.element=c,this.tiltDecayer=0,this.element.addEventListener(n.pointerEvents.move,function(t){if(h.accelerometer.isActive){h.tiltDecayer&&(clearInterval(h.tiltDecayer),h.tiltDecayer=0);var e=c.getBoundingClientRect(),i=(t.clientX-e.width/2)/(e.width/3),n=(t.clientY-e.height/2)/(e.height/3),s=-Math.max(-1023,Math.min(1023,Math.floor(1023*i))),r=Math.max(-1023,Math.min(1023,Math.floor(1023*n))),a=1046529-s*s-r*r,o=Math.floor((0<a?-1:1)*Math.sqrt(Math.abs(a)));h.accelerometer.update(-s,r,o),h.updateTilt()}},!1),this.element.addEventListener(n.pointerEvents.leave,function(t){h.accelerometer.isActive&&(h.tiltDecayer||(h.tiltDecayer=setInterval(function(){var t=h.accelerometer.getX();t=Math.floor(.85*Math.abs(t))*(0<t?1:-1);var e=h.accelerometer.getY();e=Math.floor(.85*Math.abs(e))*(0<e?1:-1);var i=-Math.sqrt(Math.max(0,1046529-t*t-e*e));Math.abs(t)<=24&&Math.abs(e)<=24&&(clearInterval(h.tiltDecayer),e=t=h.tiltDecayer=0,i=-1023),h.accelerometer.update(t,e,i),h.updateTilt()},50)))},!1)},t.prototype.updateTilt=function(){if(this.accelerometer.isActive&&this.element){var t=this.accelerometer.getX(),e=this.accelerometer.getY(),i=1-Math.min(.1,Math.pow(Math.max(Math.abs(t),Math.abs(e))/1023,2)/35);this.element.style.transform="perspective(30em) rotateX("+e*(8/1023)+"deg) rotateY("+t*(8/1023)+"deg) scale("+i+", "+i+")",this.element.style.perspectiveOrigin="50% 50% 50%",this.element.style.perspective="30em"}},t}();n.AccelerometerState=i}(pxsim||(pxsim={})),function(t){t.accelerometer=function(){return t.board().accelerometerState}}(pxsim||(pxsim={})),function(s){!function(e){function i(t){var e=s.board();if(e&&e.edgeConnectorState)return e.edgeConnectorState.getPin(t)}function n(t){return i(e.getConfig(t,-1))}e.getPin=i,e.lookupPinCfg=function(t){return n(t)},e.getPinCfg=n}(s.pxtcore||(s.pxtcore={}))}(pxsim||(pxsim={})),function(s){var t;(t=s.pxtcore||(s.pxtcore={})).registerWithDal=function(t,e,i,n){void 0===n&&(n=0),s.board().bus.listen(t,e,i)},t.deepSleep=function(){console.log("deep sleep requested")}}(pxsim||(pxsim={})),function(a){!function(e){function i(){var t=a.board();if(!t)return 42;var e=0;if(t.id&&(e=parseInt(t.id.slice(1)),isNaN(e))){for(var i=e=0;i<t.id.length;++i)e=(e<<5)-e+t.id.charCodeAt(i),e|=0;e=Math.abs(e)}return e||(e=42),e}function r(t){if(t instanceof a.RefRecord)return t.vtable.name+"@"+t.id;if(t instanceof a.RefCollection){for(var e="[",i=0,n=t.toArray();i<n.length;i++){var s=n[i];if(200<e.length){e+="...";break}e+=r(s)+", "}return e+="]"}return"function"==typeof t?(t+"").slice(0,60)+"...":t+""}e.runInParallel=a.thread.runInBackground,e.delay=a.thread.pause,e.reset=function(){a.Runtime.postMessage({type:"simulator",command:"restart",controlReset:!0}),a.getResume()},e.waitMicros=function(t){a.thread.pause(t/1e3)},e.deviceName=function(){var t=a.board();return t&&t.id?t.id.slice(0,4):"abcd"},e._ramSize=function(){return 33554432},e.deviceSerialNumber=i,e.deviceLongSerialNumber=function(){var t=e.createBuffer(8);return a.BufferMethods.setNumber(t,a.BufferMethods.NumberFormat.UInt32LE,0,i()),t},e.deviceDalVersion=function(){return"0.0.0"},e.internalOnEvent=function(t,e,i){a.pxtcore.registerWithDal(t,e,i)},e.waitForEvent=function(t,e){var i=a.getResume();a.board().bus.wait(t,e,i)},e.allocateNotifyEvent=function(){return a.board().bus.nextNotifyEvent++},e.raiseEvent=function(t,e,i){a.board().bus.queue(t,e)},e.millis=function(){return a.runtime.runningTime()},e.micros=function(){return 1073741823&a.runtime.runningTimeUs()},e.delayMicroseconds=function(t){e.delay(t/.001)},e.createBuffer=function(t){return a.BufferMethods.createBuffer(t)},e.dmesg=function(t){console.log("DMESG: "+t)},e.setDebugFlags=function(t){console.log("debug flags: "+t)},e.heapSnapshot=function(){console.log(a.runtime.traceObjects())},e.dmesgPtr=function(t,e){console.log("DMESG: "+t+" "+r(e))},e.dmesgValue=function(t){console.log("DMESG: "+r(t))},e.gc=function(){},e.profilingEnabled=function(){return!!a.runtime.perfCounters},e.__log=function(t,e){var i="";switch(t){case 0:i="d>";break;case 1:i="l>";break;case 2:i="w>";break;case 3:i="e>"}console.log(i+e),a.runtime.board.writeSerial(e)},e.heapDump=function(){},e.isUSBInitialized=function(){return!1}}(a.control||(a.control={}))}(pxsim||(pxsim={})),function(t){t.board=function(){return t.runtime.board}}(pxsim||(pxsim={})),function(t){var e;(e=t.loops||(t.loops={})).pause=t.thread.pause,e.forever=t.thread.forever}(pxsim||(pxsim={})),function(i){var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pressedTime=-1,t._clickedTime=-1,t}return __extends(t,e),t.prototype.setPressed=function(t){if(this.pressed!==t)if(this.pressed=t)this._wasPressed=!0,i.board().bus.queue(this.id,1),this._pressedTime=i.runtime.runningTime();else if(-1!==this._pressedTime){i.board().bus.queue(this.id,2);var e=i.runtime.runningTime();1e3<=e-this._pressedTime?i.board().bus.queue(this.id,4):i.board().bus.queue(this.id,3),-1!==this._clickedTime&&e-this._clickedTime<=500&&i.board().bus.queue(this.id,6),this._clickedTime=e}},t.prototype.wasPressed=function(){var t=this._wasPressed;return this._wasPressed=!1,t},t.prototype.isPressed=function(){return this.pressed},t}(i.Button);i.CommonButton=n;var t=function(t){var e=this;this.usesButtonAB=!1,this.buttonsByPin={},this.buttons=t||[new n(1),new n(2),new n(3)],this.buttons.forEach(function(t){return e.buttonsByPin[t.id]=t})};i.CommonButtonState=t}(pxsim||(pxsim={})),function(n){!function(e){function i(t){var e=n.board().buttonState.buttonsByPin,i=e[t+""];return i||(i=e[t+""]=new n.CommonButton(t)),i}e.getButtonByPin=i,e.getButtonByPinCfg=function(t){return i(e.getConfig(t,-1))},e.getButton=function(t){var e=n.board().buttonState.buttons;if(2===t&&(n.board().buttonState.usesButtonAB=!0,n.runtime.queueDisplayUpdate()),t<e.length&&0<=t)return e[t]}}(n.pxtcore||(n.pxtcore={}))}(pxsim||(pxsim={})),function(n){var t;(t=n.ButtonMethods||(n.ButtonMethods={})).onEvent=function(t,e,i){n.pxtcore.registerWithDal(t.id,e,i)},t.isPressed=function(t){return t.pressed},t.wasPressed=function(t){return t.wasPressed()},t.id=function(t){return t.id}}(pxsim||(pxsim={})),function(e){(e.DigitalInOutPinMethods||(e.DigitalInOutPinMethods={})).pushButton=function(t){return e.pxtcore.getButtonByPin(t.id)}}(pxsim||(pxsim={})),function(e){var t;(t=e.network||(e.network={})).cableSendPacket=function(t){e.getCableState().send(t)},t.cablePacket=function(){return e.getCableState().packet},t.onCablePacket=function(t){e.getCableState().listen(t)},t.onCableError=function(t){e.getCableState().listenError(t)}}(pxsim||(pxsim={})),function(e){var t=function(){function t(){this.packetReceived=!1,this.PULSE_CABLE_COMPONENT_ID=8259,this.PULSE_PACKET_EVENT=2,this.PULSE_PACKET_ERROR_EVENT=3}return t.prototype.send=function(t){e.Runtime.postMessage({type:"irpacket",packet:t.data})},t.prototype.listen=function(t){e.pxtcore.registerWithDal(this.PULSE_CABLE_COMPONENT_ID,this.PULSE_PACKET_EVENT,t)},t.prototype.listenError=function(t){e.pxtcore.registerWithDal(this.PULSE_CABLE_COMPONENT_ID,this.PULSE_PACKET_ERROR_EVENT,t)},t.prototype.receive=function(t){this.packet=t,this.packetReceived=!0,e.board().bus.queue(this.PULSE_CABLE_COMPONENT_ID,this.PULSE_PACKET_EVENT)},t}();e.CableState=t,e.getCableState=function(){return e.board().cableState}}(pxsim||(pxsim={})),function(e){var r,t;(t=r||(r={}))[t.High=0]="High",t[t.Low=1]="Low",t[t.Normal=2]="Normal";var i=function(){function t(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=255),void 0===n&&(n=64),void 0===s&&(s=192),this.id=t,this.min=e,this.max=i,this.lowThreshold=n,this.highThreshold=s,this.sensorUsed=!1,this.state=r.Normal,this.level=Math.ceil((i-e)/2)}return t.prototype.setUsed=function(){this.sensorUsed||(this.sensorUsed=!0,e.runtime.queueDisplayUpdate())},t.prototype.setLevel=function(t){this.level=this.clampValue(t),this.level>=this.highThreshold?this.setState(r.High):this.level<=this.lowThreshold?this.setState(r.Low):this.setState(r.Normal)},t.prototype.getLevel=function(){return this.level},t.prototype.setLowThreshold=function(t){this.lowThreshold=this.clampValue(t),this.highThreshold=Math.max(this.lowThreshold+1,this.highThreshold)},t.prototype.setHighThreshold=function(t){this.highThreshold=this.clampValue(t),this.lowThreshold=Math.min(this.highThreshold-1,this.lowThreshold)},t.prototype.clampValue=function(t){return t<this.min?this.min:t>this.max?this.max:t},t.prototype.setState=function(t){if(this.state!==t)switch(this.state=t){case r.High:e.board().bus.queue(this.id,2);break;case r.Low:e.board().bus.queue(this.id,1);break;case r.Normal:}},t}();e.AnalogSensorState=i}(pxsim||(pxsim={})),function(b){!function(S){function d(t){var e=["sim-button","sim-button-outer"],i=e[0],n=e[1],s=S.PIN_DIST/2.5,r=S.PIN_DIST/5,a=.8*S.PIN_DIST,o=S.PIN_DIST/8,c=S.PIN_DIST/12,h=o+r,l=t[0],u=t[1],f=l-s/2,d=u-s/2,p=3*S.PIN_DIST-s,g=2*S.PIN_DIST+s,m=f,v=d+s,x=m+g/2,y=v+p/2,w=b.svg.elt("g"),k=function(t,e){b.svg.child(w,"rect",{class:"sim-button-tab",x:t,y:e,width:s,height:s})};k(f,d),k(f+2*S.PIN_DIST,d),k(f,d+3*S.PIN_DIST),k(f+2*S.PIN_DIST,d+3*S.PIN_DIST),b.svg.child(w,"rect",{class:n,x:m,y:v,rx:c,ry:c,width:g,height:p});var _=function(t,e){b.svg.child(w,"circle",{class:"sim-button-nut",cx:t,cy:e,r:r})};_(m+h,v+h),_(m+g-h,v+h),_(m+h,v+p-h),_(m+g-h,v+p-h);b.svg.child(w,"circle",{class:i,cx:x,cy:y,r:a});return{el:w,y:d,x:f,w:g,h:p+2*s}}S.mkBtnSvg=d,S.BUTTON_PAIR_STYLE="\n            .sim-button {\n                pointer-events: none;\n                fill: #000;\n            }\n            .sim-button-outer:active ~ .sim-button,\n            .sim-button-virtual:active {\n                fill: #FFA500;\n            }\n            .sim-button-outer {\n                cursor: pointer;\n                fill: #979797;\n            }\n            .sim-button-outer:hover {\n                stroke:gray;\n                stroke-width: "+S.PIN_DIST/5+"px;\n            }\n            .sim-button-nut {\n                fill:#000;\n                pointer-events:none;\n            }\n            .sim-button-nut:hover {\n                stroke:"+S.PIN_DIST/15+"px solid #704A4A;\n            }\n            .sim-button-tab {\n                fill:#FFF;\n                pointer-events:none;\n            }\n            .sim-button-virtual {\n                cursor: pointer;\n                fill: rgba(255, 255, 255, 0.6);\n                stroke: rgba(255, 255, 255, 1);\n                stroke-width: "+S.PIN_DIST/5+"px;\n            }\n            .sim-button-virtual:hover {\n                stroke: rgba(128, 128, 128, 1);\n            }\n            .sim-text-virtual {\n                fill: #000;\n                pointer-events:none;\n            }\n            ";var t=function(){function t(){this.style=S.BUTTON_PAIR_STYLE}return t.prototype.init=function(t,e){this.state=e,this.bus=t,this.defs=[],this.element=this.mkBtns(),this.updateState(),this.attachEvents()},t.prototype.moveToCoord=function(t){var e=3*S.PIN_DIST,i=t[0],n=t[1];S.translateEl(this.aBtn,[i,n]),S.translateEl(this.bBtn,[i+e,n]),S.translateEl(this.abBtn,[i+1.5*S.PIN_DIST,n+4*S.PIN_DIST])},t.prototype.updateState=function(){this.state.aBtn,this.state.bBtn,this.state.abBtn,this.aBtn,this.bBtn,this.abBtn;this.state.usesButtonAB&&"visible"!=this.abBtn.style.visibility&&(this.abBtn.style.visibility="visible")},t.prototype.updateTheme=function(){},t.prototype.mkBtns=function(){this.aBtn=d([0,0]).el,this.bBtn=d([0,0]).el;var t,e,i,n,s,r,a,o,c,h,l,u;this.abBtn=(t=2.8*S.PIN_DIST,e=(t-2*S.PIN_DIST)/2,i=S.PIN_DIST/2,s=n=0-e+t/2,r=1.3*S.PIN_DIST,o=a=-e,c=S.PIN_DIST/7,h=S.PIN_DIST/10,l=b.svg.elt("g"),b.svg.child(l,"rect",{class:"sim-button-virtual",x:a,y:o,rx:i,ry:i,width:t,height:t}),u=S.mkTxt(n+c,s+h,r,0,"A+B"),b.U.addClass(u,"sim-text"),b.U.addClass(u,"sim-text-virtual"),l.appendChild(u),l),this.abBtn.style.visibility="hidden";var f=b.svg.elt("g");return b.U.addClass(f,"sim-buttonpair"),f.appendChild(this.aBtn),f.appendChild(this.bBtn),f.appendChild(this.abBtn),f},t.prototype.attachEvents=function(){var n=this,s=[this.state.aBtn,this.state.bBtn];[this.aBtn,this.bBtn].forEach(function(e,i){b.pointerEvents.down.forEach(function(t){return e.addEventListener(t,function(t){s[i].pressed=!0})}),e.addEventListener(b.pointerEvents.leave,function(t){s[i].pressed=!1}),e.addEventListener(b.pointerEvents.up,function(t){s[i].pressed=!1,n.bus.queue(s[i].id,n.state.props.BUTTON_EVT_UP),n.bus.queue(s[i].id,n.state.props.BUTTON_EVT_CLICK)})});var e=function(e){s.forEach(function(t){return t.pressed=e})};b.pointerEvents.down.forEach(function(t){return n.abBtn.addEventListener(t,function(t){e(!0)})}),this.abBtn.addEventListener(b.pointerEvents.leave,function(t){e(!1)}),this.abBtn.addEventListener(b.pointerEvents.up,function(t){e(!1),n.bus.queue(n.state.abBtn.id,n.state.props.BUTTON_EVT_UP),n.bus.queue(n.state.abBtn.id,n.state.props.BUTTON_EVT_CLICK)})},t}();S.ButtonPairView=t}(b.visuals||(b.visuals={}))}(pxsim||(pxsim={})),function(n){var e,t;(t=e=n.PinFlags||(n.PinFlags={}))[t.Unused=0]="Unused",t[t.Digital=1]="Digital",t[t.Analog=2]="Analog",t[t.Input=4]="Input",t[t.Output=8]="Output",t[t.Touch=16]="Touch";var i=function(){function t(t){this.id=t,this.touched=!1,this.value=0,this.period=0,this.servoAngle=0,this.mode=e.Unused,this.pitch=!1,this.pull=0,this.eventMode=0,this.used=!1}return t.prototype.setValue=function(t){var e=this.value;this.value=t;var i=n.board();i&&1==this.eventMode&&e!=this.value&&i.bus.queue(this.id,0<this.value?2:3)},t.prototype.digitalReadPin=function(){return this.mode=e.Digital|e.Input,100<this.value?1:0},t.prototype.digitalWritePin=function(t){n.board();this.mode=e.Digital|e.Output;this.value;this.value=0<t?1023:0,n.runtime.queueDisplayUpdate()},t.prototype.setPull=function(t){this.pull=t},t.prototype.analogReadPin=function(){return this.mode=e.Analog|e.Input,this.value||0},t.prototype.analogWritePin=function(t){n.board();this.mode=e.Analog|e.Output;this.value;this.value=Math.max(0,Math.min(1023,t)),n.runtime.queueDisplayUpdate()},t.prototype.analogSetPeriod=function(t){this.mode=e.Analog|e.Output,this.period=t,n.runtime.queueDisplayUpdate()},t.prototype.servoWritePin=function(t){this.analogSetPeriod(2e4),this.servoAngle=Math.max(0,Math.min(180,t)),n.runtime.queueDisplayUpdate()},t.prototype.servoSetPulse=function(t,e){},t.prototype.isTouched=function(){return this.mode=e.Touch|e.Analog|e.Input,this.touched},t.prototype.onEvent=function(t,e){var i=n.board();switch(t){case 4:case 5:this.eventMode=2;break;case 2:case 3:this.eventMode=1;break;default:return}i.bus.listen(this.id,t,e)},t}();n.Pin=i;var s=function(){function t(t,e,i){this.tx=t,this.rx=e,this.id=i,this.baudRate=115200,this.setRxBufferSize(64),this.setTxBufferSize(64)}return t.prototype.setTxBufferSize=function(t){this.txBuffer=n.control.createBuffer(t)},t.prototype.setRxBufferSize=function(t){this.rxBuffer=n.control.createBuffer(t)},t.prototype.read=function(){return-1},t.prototype.readBuffer=function(){return n.control.createBuffer(0)},t.prototype.writeBuffer=function(t){},t.prototype.setBaudRate=function(t){this.baudRate=t},t.prototype.redirect=function(t,e,i){this.tx=t,this.rx=e,this.baudRate=i},t.prototype.onEvent=function(t,e){n.control.internalOnEvent(this.id,t,e)},t.prototype.onDelimiterReceived=function(t,e){},t}();n.SerialDevice=s;var r=function(){function t(t,e,i){this.mosi=t,this.miso=e,this.sck=i,this.frequency=25e4,this.mode=0}return t.prototype.write=function(t){return 0},t.prototype.transfer=function(t,e){},t.prototype.setFrequency=function(t){this.frequency=t},t.prototype.setMode=function(t){this.mode=t},t}();n.SPI=r;var a=function(){function t(t,e){this.sda=t,this.scl=e}return t.prototype.readBuffer=function(t,e,i){return n.control.createBuffer(0)},t.prototype.writeBuffer=function(t,e,i){return 0},t}();n.I2C=a;var o=function(){function t(t){this.props=t,this._i2cs=[],this._spis=[],this._serials=[],this.pins=t.pins.map(function(t){return null!=t?new i(t):null})}return t.prototype.getPin=function(e){return this.pins.filter(function(t){return t&&t.id==e})[0]||null},t.prototype.createI2C=function(e,i){var t=this._i2cs.filter(function(t){return t.sda==e&&t.scl==i})[0];return t||this._i2cs.push(t=new a(e,i)),t},t.prototype.createSPI=function(e,i,n){var t=this._spis.filter(function(t){return t.mosi==e&&t.miso==i&&t.sck==n})[0];return t||this._spis.push(t=new r(e,i,n)),t},t.prototype.createSerialDevice=function(e,i,t){var n=this._serials.filter(function(t){return t.tx==e&&t.rx==i})[0];return n||this._serials.push(n=new s(e,i,t)),n},t}();n.EdgeConnectorState=o}(pxsim||(pxsim={})),function(t){var e;(e=t.configStorage||(t.configStorage={})).setBuffer=function(t,e){},e.getBuffer=function(t){},e.removeItem=function(t){},e.clear=function(){}}(pxsim||(pxsim={})),function(d){!function(e){var c=-8,h=-7,l=68,u=180,f='\n    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" viewBox="0 0 33.6 90" width="33.599998" height="90">\n    <path class="st0" d="M1.3 65.000002v5.9C1.3 74.800002 4.5 78 8.4 78c3.9 0 7.1-3.199998 7.1-7.099998v-13.7c-1.9-1.9-4.4-2.9-7.1-2.8-4.6 0-8.4 2.6-8.4 5.9v1.5c0 1.2.5 2.3 1.3 3.2z" id="path5" opacity=".65" fill="#ececec"/>\n    <g id="g7" transform="translate(0 10.900002)">\n      <path class="st1" d="M12.7 49.6l1.2 1.4h-1l-2.4-1.4V15c0-.3.5-.5 1.1-.5.6 0 1.1.2 1.1.5z" id="path9" fill="#8c8c8c"/>\n      <path class="st1" d="M2.6 42.9c0 .7 1.1 1.3 2.1 1.8.4.2 1.2.6 1.2.9V49l-2.5 2h.9L8 49v-3.5c0-.7-.9-1.2-1.9-1.7-.4-.2-1.3-.8-1.3-1.1v-52.9c0-.4-.5-.7-1.1-.7-.6 0-1.1.3-1.1.7z" id="path11" fill="#8c8c8c"/>\n      <path class="sim-led-main" d="M1.3 54.1V60c0 3.9 3.2 7.1 7.1 7.1 3.9 0 7.1-3.2 7.1-7.1V46.3c-1.9-1.9-4.4-2.9-7.1-2.8-4.6 0-8.4 2.6-8.4 5.9v1.5c0 1.2.5 2.3 1.3 3.2z" id="LED" opacity=".3" fill="#ccc"/>\n      <path class="st3" d="M1.3 54.1V51c0-2.7 3.2-5 7.1-5 3.9 0 7.1 2.2 7.1 5v-4.6c-1.9-1.9-4.4-2.9-7.1-2.8-4.6 0-8.4 2.6-8.4 5.9V51c0 1.1.5 2.2 1.3 3.1z" id="path15" opacity=".9" fill="#d1d1d1"/>\n      <path class="st4" d="M1.3 54.1V51c0-2.7 3.2-5 7.1-5 3.9 0 7.1 2.2 7.1 5v-4.6c-1.9-1.9-4.4-2.9-7.1-2.8-4.6 0-8.4 2.6-8.4 5.9V51c0 1.1.5 2.2 1.3 3.1z" id="path17" opacity=".7" fill="#e6e6e6"/>\n      <path class="st5" d="M1.3 54.1V51c0-2.7 3.2-5 7.1-5 3.9 0 7.1 2.2 7.1 5v-3.1c-1.9-1.9-4.4-2.9-7.1-2.8C3.8 45.1 0 47.7 0 51c0 1.1.5 2.2 1.3 3.1z" id="path19" opacity=".25" fill="#e6e6e6"/>\n      <ellipse class="st5" cx="8.3" cy="51" rx="7.1" ry="5" id="ellipse21" opacity=".25" fill="#e6e6e6"/>\n      <ellipse class="st5" cx="8.3" cy="51" rx="7.1" ry="5" id="ellipse23" opacity=".25" fill="#e6e6e6"/>\n      <g class="st8" id="g29" transform="translate(0 -12)" opacity=".61">\n        <path class="st9" d="M8.3 57.1c4.3 0 6.1 2 6.1 2l-.7.7s-1.6-1.7-5.4-1.7C5.9 58 3.6 59 2 60.8l-.8-.6c1.9-2.1 4.4-3.2 7.1-3.1z" id="path31" fill="#fff"/>\n      </g>\n      <g class="st8" id="g33" transform="translate(0 -12)" opacity=".61">\n        <path class="st9" d="M12.9 75.9c1.1-1.1 1.7-2.6 1.7-4.2V61.4l-1.9-1.5v10.4c.9 2.8.3 4.2-.7 5.2.3.1.6.2.9.4z" id="path35" fill="#fff"/>\n        <path class="st9" d="M5.6 77.5l.3-.9c-1.5-.7-2.6-2.1-2.8-3.7h-1c.3 2 1.6 3.7 3.5 4.6z" id="path37" fill="#fff"/>\n      </g>\n      <text style="line-height:1.25;-inkscape-font-specification:consolas" x="14.103056" y=".224915" id="text4514" font-weight="400" font-size="7.744442" font-family="consolas" letter-spacing="0" word-spacing="0" fill="#666" stroke-width=".968055">\n        <tspan id="tspan4512" x="14.103056" y=".224915">330Ω</tspan>\n      </text>\n      <text style="line-height:1.25;-inkscape-font-specification:consolas" x="1.868053" y="77.579796" id="text4524" font-weight="400" font-size="32.793365" font-family="consolas" letter-spacing="0" word-spacing="0" stroke-width=".819834">\n        <tspan id="tspan4522" x="1.868053" y="77.579796" font-size="10.931121"></tspan>\n      </text>\n    </g>\n    <g id="g39" transform="translate(0 -1.099998)">\n      <path class="st1" id="rect41" fill="#8c8c8c" d="M11.6 16.9h21.700001v1.9H11.6z"/>\n      <g id="g43">\n        <path class="st10" id="rect45" fill="none" d="M12 16.9h3.2v1.9H12z"/>\n        <path class="st11" d="M19 15c-.3-.2-.6-.3-.9-.3h-1.4c-.3 0-.5.3-.5.7v4.9c0 .4.2.7.5.7h1.4c.3 0 .6-.1.9-.3.3-.2.6-.3.9-.3h5c.3 0 .6.1.9.3h.1c.3.2.6.3.9.3h1.4c.3 0 .5-.3.5-.7v-4.9c0-.4-.2-.7-.5-.7h-1.4c-.3 0-.6.1-.9.3h-.1c-.3.2-.6.3-.9.3h-5c-.2 0-.5-.1-.9-.3z" id="path47" fill="#d6bf90"/>\n        <path class="st12" d="M28.4 18.5c-.1.1-.1.2-.2.3-.3.5-.7.8-1.2.8s-.9-.1-1.4-.3c-.6-.1-1.1-.1-1.7-.1-2 0-3.9 0-5.9.2-.4.1-.8 0-1.1-.1-.2-.1-.4-.2-.5-.5v1.5c0 .2.1.3.2.3H18c.3 0 .6-.1.9-.3.3-.2.7-.3 1.1-.3h5c.4 0 .8.1 1.1.3.3.1.6.2.8.2h1.4c.1 0 .2-.1.2-.3v-1.9c0 .1-.1.2-.1.2z" id="path49" fill="#aa936b"/>\n        <g id="g51">\n          <path class="st13" id="rect53" fill="#ad9f4e" d="M27.200001 14.7h.7v6.2h-.7z"/>\n          <path class="st14" id="rect55" opacity=".4" d="M27.200001 17.799999h.7v2.5h-.7z"/>\n          <path class="st15" id="rect57" opacity=".5" fill="#ff3" d="M27.200001 15h.7v1.3h-.7z"/>\n          <path class="st16" id="rect59" opacity=".5" fill="#fff" d="M27.200001 15.3h.7v.7h-.7z"/>\n        </g>\n        <path class="st17" id="rect61" fill="#aa4518" d="M23.1 15.3h1.3v5.1h-1.3z"/>\n        <path class="st18" id="rect63" fill="#ff9700" d="M20.6 15.3h1.3v5.1h-1.3z"/>\n        <path class="st18" d="M19.3 15.1c-.1 0-.1-.1-.2-.1-.3-.2-.6-.3-.9-.3H18V21h.1c.3 0 .6-.1.9-.3.1 0 .1-.1.2-.1v-5.5z" id="path65" fill="#ff9700"/>\n        <path class="st19" d="M18.7 15.7c.4.1.8.2 1.2.2H21c1.2-.1 2.4-.1 3.6 0 .4 0 .9 0 1.3-.1.3-.1.6-.2.8-.3.6-.2 1.2-.3 1.8-.2 0-.1-.1-.3-.2-.3h-1.4c-.3 0-.6.1-.9.3-.3.2-.7.3-1.1.3h-5c-.4 0-.8-.1-1.1-.3-.3-.1-.6-.2-.8-.2h-1.4c-.1 0-.2.1-.2.3v.2c.8-.1 1.5 0 2.3.1z" id="path67" opacity=".74" fill="#fffdfa"/>\n      </g>\n    </g>\n  </svg>\n      ';e.mkLedPart=function(t){void 0===t&&(t=[0,0]);var e=t[0],i=t[1],n=e+c,s=i+h,r=l,a=u,o=d.svg.elt("image");return d.svg.hydrate(o,{class:"sim-led",x:n,y:s,width:r,height:a,href:d.svg.toDataUri(f)}),{el:o,x:n,y:s,w:r,h:a}};var t=function(){function t(t){this.color="rgb(0,255,0)",this.parsePinString=t}return t.prototype.init=function(t,e,i,n){this.pin=this.parsePinString(n.name||n.pin),this.bus=t,this.initDom(),this.updateState()},t.prototype.initDom=function(){this.element=d.svg.elt("g");var t=(new DOMParser).parseFromString(f,"image/svg+xml").querySelector("svg");d.svg.hydrate(t,{class:"sim-led",width:l,height:u}),this.led=t.getElementById("LED"),this.text=t.getElementById("tspan4522"),this.element.appendChild(t)},t.prototype.moveToCoord=function(t){e.translateEl(this.element,[t[0]+c,t[1]+h])},t.prototype.updateTheme=function(){},t.prototype.updateState=function(){if(this.currentValue!==this.pin.value||this.currentMode!=this.pin.mode){this.currentValue=this.pin.value,this.currentMode=this.pin.mode;var t=this.led.style;this.currentMode&d.PinFlags.Digital?(t.fill=this.currentValue?"#00ff00":"#ffffff",t.opacity="0.9",this.text.textContent=this.currentValue?"1":"0"):(t.fill="#00ff00",t.opacity=(.1+Math.max(0,Math.min(1023,this.currentValue))/1023*.8).toString(),this.text.textContent="~"+this.currentValue)}},t}();e.LedView=t}(d.visuals||(d.visuals={}))}(pxsim||(pxsim={})),function(s){!function(n){function e(){return s.svg.parseString('\n        <svg xmlns="http://www.w3.org/2000/svg" id="svg2" width="112.188" height="299.674">\n          <g id="layer1" stroke-linecap="round" stroke-linejoin="round" transform="scale(0.8)">\n            <path id="path8212" fill="#0061ff" stroke-width="6.6" d="M.378 44.61v255.064h112.188V44.61H.378z"/>\n            <path id="crankbase" fill="#00f" stroke-width="6.6" d="M56.57 88.047C25.328 88.047 0 113.373 0 144.615c.02 22.352 11.807 42.596 32.238 51.66.03 3.318.095 5.24.088 7.938 0 13.947 11.307 25.254 25.254 25.254 13.947 0 25.254-11.307 25.254-25.254-.006-2.986-.415-5.442-.32-8.746 19.487-9.45 30.606-29.195 30.625-50.852 0-31.24-25.33-56.568-56.57-56.568z"/>\n            <path id="lowertip" fill="#00a2ff" stroke-width="2" d="M.476 260.78v38.894h53.82v-10.486a6.82 6.566 0 0 1-4.545-6.182 6.82 6.566 0 0 1 6.82-6.566 6.82 6.566 0 0 1 6.82 6.566 6.82 6.566 0 0 1-4.545 6.182v10.486h53.82V260.78H.475z"/>\n            <path id="uppertip" fill="#00a2ff" stroke-width="2" d="M112.566 83.503V44.61h-53.82v10.487a6.82 6.566 0 0 1 4.544 6.18 6.82 6.566 0 0 1-6.818 6.568 6.82 6.566 0 0 1-6.82-6.567 6.82 6.566 0 0 1 4.546-6.18V44.61H.378v38.893h112.188z"/>\n            <path id="VCC" fill="red" stroke-width="2" d="M53.72 21.93h5.504v22.627H53.72z"/>\n            <path id="LOGIC" fill="#fc0" stroke-width="2" d="M47.3 21.93h5.503v22.627H47.3z"/>\n            <path id="GND" fill="#a02c2c" stroke-width="2" d="M60.14 21.93h5.505v22.627H60.14z"/>\n            <path id="connector" stroke-width="2" d="M45.064 0a1.488 1.488 0 0 0-1.488 1.488v24.5a1.488 1.488 0 0 0 1.488 1.487h22.71a1.488 1.488 0 0 0 1.49-1.488v-24.5A1.488 1.488 0 0 0 67.774 0h-22.71z"/>\n            <g id="crank" transform="translate(0 -752.688)">\n              <path id="arm" fill="#ececec" stroke="#000" stroke-width="1.372" d="M47.767 880.88c-4.447 1.162-8.412 8.278-8.412 18.492s3.77 18.312 8.412 18.494c8.024.314 78.496 5.06 78.51-16.952.012-22.013-74.377-21.117-78.51-20.035z"/>\n              <circle id="path8216" cx="56.661" cy="899.475" r="8.972" fill="gray" stroke-width="2"/>\n            </g>\n          </g>\n        </svg>\n                    ').firstElementChild}n.mkMicroServoPart=function(t){return void 0===t&&(t=[0,0]),{el:e(),x:t[0],y:t[1],w:112.188,h:299.674}};var t=function(){function t(){this.style="",this.overElement=void 0,this.defs=[],this.currentAngle=0,this.targetAngle=0,this.lastAngleTime=0}return t.prototype.init=function(t,e,i,n){this.state=e,this.pin=this.state.props.servos[s.readPin(n.name||n.pin)],this.bus=t,this.defs=[],this.initDom(),this.updateState()},t.prototype.initDom=function(){this.element=e(),this.crankEl=this.element.querySelector("#crank"),this.crankTransform=this.crankEl.getAttribute("transform")},t.prototype.moveToCoord=function(t){var e=t[0],i=t[1];n.translateEl(this.element,[e,i])},t.prototype.updateState=function(){if(this.targetAngle=180-this.state.getPin(this.pin).servoAngle,this.targetAngle!=this.currentAngle){var t=s.U.now(),e=Math.min(t-this.lastAngleTime,50)/1e3,i=this.targetAngle-this.currentAngle;this.currentAngle+=Math.min(Math.abs(i),300*e)*(0<i?1:-1),this.crankEl.setAttribute("transform",this.crankTransform+" rotate("+this.currentAngle+", 56.661, 899.475)"),this.lastAngleTime=t,setTimeout(function(){return s.runtime.updateDisplay()},20)}},t.prototype.updateTheme=function(){},t}();n.MicroServoView=t}(s.visuals||(s.visuals={}))}(pxsim||(pxsim={})),function(t){var i,e;(e=i||(i={}))[e.RGB=1]="RGB",e[e.RGBW=2]="RGBW",e[e.RGB_RGB=3]="RGB_RGB",e[e.DotStar=4]="DotStar";var n=function(){function t(){this.mode=i.RGB}return Object.defineProperty(t.prototype,"length",{get:function(){return this.buffer?this.buffer.length/this.stride|0:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stride",{get:function(){return this.mode==i.RGBW||this.mode==i.DotStar?4:3},enumerable:!0,configurable:!0}),t.prototype.pixelColor=function(t){var e=t*this.stride;switch(this.mode){case i.RGBW:return[this.buffer[e+1],this.buffer[e],this.buffer[e+2],this.buffer[e+3]];case i.RGB_RGB:return[this.buffer[e],this.buffer[e+1],this.buffer[e+2]];case i.DotStar:return[this.buffer[e+3],this.buffer[e+2],this.buffer[e+1]];default:return[this.buffer[e+1],this.buffer[e+0],this.buffer[e+2]]}},t}();t.CommonNeoPixelState=n}(pxsim||(pxsim={})),function(r){(r.light||(r.light={})).sendBuffer=function(t,e,i,n){var s=r.neopixelState(t.id);s.mode=255&i,s.buffer=n.data,r.runtime.queueDisplayUpdate()}}(pxsim||(pxsim={})),function(d){!function(e){var c=-8,h=-7,l=68,u=180,f='\n    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" viewBox="0 0 33.6 90" width="33.599998" height="90">\n    <path id="path9" d="M12.7 60.500002l1.2 1.4h-1l-2.4-1.4v-34.6c0-.3.5-.5 1.1-.5.6 0 1.1.2 1.1.5z" class="st1" fill="#8c8c8c"/>\n    <path id="path11" d="M3.4 61.900002h1.905509L4.8.700002c-.003304-.399986-.5-.7-1.1-.7-.6 0-1.1.3-1.1.7z" class="st1" fill="#8c8c8c"/>\n    <text id="text4514" y="11.124916" x="14.103056" style="line-height:1.25;-inkscape-font-specification:consolas" font-weight="400" font-size="7.744442" font-family="consolas" letter-spacing="0" word-spacing="0" fill="#666" stroke-width=".968055">\n      <tspan y="11.124916" x="14.103056" id="tspan4512">10kΩ</tspan>\n    </text>\n    <text style="line-height:1.25;-inkscape-font-specification:consolas" x="1.868053" y="77.579796" id="text4524" font-weight="400" font-size="32.793365" font-family="consolas" letter-spacing="0" word-spacing="0" stroke-width=".819834">\n    <tspan id="tspan4522" x="1.868053" y="77.579796" font-size="10.931121"></tspan>\n    </text>\n    <path id="rect41" class="st1" fill="#8c8c8c" d="M11.6 15.800001h21.700001v1.9H11.6z"/>\n    <path class="st10" id="rect45" fill="none" d="M12 15.800001h3.2v1.9H12z"/>\n    <path class="st11" d="M19 13.900002c-.3-.2-.6-.3-.9-.3h-1.4c-.3 0-.5.3-.5.7v4.9c0 .4.2.7.5.7h1.4c.3 0 .6-.1.9-.3.3-.2.6-.3.9-.3h5c.3 0 .6.1.9.3h.1c.3.2.6.3.9.3h1.4c.3 0 .5-.3.5-.7v-4.9c0-.4-.2-.7-.5-.7h-1.4c-.3 0-.6.1-.9.3h-.1c-.3.2-.6.3-.9.3h-5c-.2 0-.5-.1-.9-.3z" id="path47" fill="#d6bf90"/>\n    <path class="st12" d="M28.4 17.400002c-.1.1-.1.2-.2.3-.3.5-.7.8-1.2.8s-.9-.1-1.4-.3c-.6-.1-1.1-.1-1.7-.1-2 0-3.9 0-5.9.2-.4.1-.8 0-1.1-.1-.2-.1-.4-.2-.5-.5v1.5c0 .2.1.3.2.3H18c.3 0 .6-.1.9-.3.3-.2.7-.3 1.1-.3h5c.4 0 .8.1 1.1.3.3.1.6.2.8.2h1.4c.1 0 .2-.1.2-.3v-1.9c0 .1-.1.2-.1.2z" id="path49" fill="#aa936b"/>\n    <g id="g51" transform="translate(0 -1.099998)">\n      <path class="st13" id="rect53" fill="#ad9f4e" d="M27.200001 14.7h.7v6.2h-.7z"/>\n      <path class="st14" id="rect55" opacity=".4" d="M27.200001 17.799999h.7v2.5h-.7z"/>\n      <path class="st15" id="rect57" opacity=".5" fill="#ff3" d="M27.200001 15h.7v1.3h-.7z"/>\n      <path class="st16" id="rect59" opacity=".5" fill="#fff" d="M27.200001 15.3h.7v.7h-.7z"/>\n    </g>\n    <path class="st17" id="rect61" fill="#ff9700" d="M23.1 14.200002h1.3v5.1h-1.3z"/>\n    <path class="st18" id="rect63" d="M20.6 14.200002h1.3v5.1h-1.3z"/>\n    <path class="st18" d="M19.3 14.000002c-.1 0-.1-.1-.2-.1-.3-.2-.6-.3-.9-.3H18v6.3h.1c.3 0 .6-.1.9-.3.1 0 .1-.1.2-.1v-5.5z" id="path65" fill="#aa4518"/>\n    <path class="st19" d="M18.7 14.600002c.4.1.8.2 1.2.2H21c1.2-.1 2.4-.1 3.6 0 .4 0 .9 0 1.3-.1.3-.1.6-.2.8-.3.6-.2 1.2-.3 1.8-.2 0-.1-.1-.3-.2-.3h-1.4c-.3 0-.6.1-.9.3-.3.2-.7.3-1.1.3h-5c-.4 0-.8-.1-1.1-.3-.3-.1-.6-.2-.8-.2h-1.4c-.1 0-.2.1-.2.3v.2c.8-.1 1.5 0 2.3.1z" id="path67" opacity=".74" fill="#fffdfa"/>\n    <ellipse id="path4569" ry="5.949258" rx="6.745286" cy="64.610916" cx="8.085964" fill="#aa4518" stroke-width="3.558676" stroke-linecap="round" stroke-linejoin="round"/>\n    <ellipse id="path4569-5" ry="5.488401" rx="6.222764" cy="64.652809" cx="8.024301" fill="#e7e1df" stroke-width="3.283004" stroke-linecap="round" stroke-linejoin="round"/>\n    <ellipse id="path4607" cx="3.393591" cy="65" rx=".628443" ry="1.016842" fill="#4d4d4d" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n    <ellipse id="path4607-3" cx="12.568855" cy="65" rx=".628443" ry="1.016842" fill="#4d4d4d" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n    <path d="M5.865466 60.253708c2.521642.258451 5.042396.51681 4.411086.820414-.63131.303603-4.416986.652835-4.224443.970671.192542.317835 4.36002.604044 4.24887.991436-.111149.387393-4.504242.87629-4.482809 1.204577.021434.328287 4.454339.49583 4.535187.914613.08085.418783-4.193489 1.089267-4.318738 1.529318-.125249.44005 3.895722.649476 4.19647 1.008916.300747.359441-3.121579.869298-3.749962 1.183637-.628384.314339 1.535952.433028 3.699646.551682" id="path4630" fill="none" stroke="#9e4c34" stroke-width=".245669" stroke-linecap="round"/>\n  </svg>\n            ';e.mkPhotoCellPart=function(t){void 0===t&&(t=[0,0]);var e=t[0],i=t[1],n=e+c,s=i+h,r=l,a=u,o=d.svg.elt("image");return d.svg.hydrate(o,{class:"sim-led",x:n,y:s,width:r,height:a,href:d.svg.toDataUri(f)}),{el:o,x:n,y:s,w:r,h:a}};var t=function(){function t(t){this.color="rgb(0,255,0)",this.parsePinString=t}return t.prototype.init=function(t,e,i,n){this.pin=this.parsePinString(n.name||n.pin),this.bus=t,this.initDom(),this.updateState()},t.prototype.initDom=function(){var t=this;this.element=d.svg.elt("g");var e=(new DOMParser).parseFromString(f,"image/svg+xml").querySelector("svg");d.svg.hydrate(e,{class:"sim-led",width:l,height:u}),this.text=e.getElementById("tspan4522"),this.element.appendChild(e),this.element.onclick=function(){t.pin.value+=256,t.pin.value=t.pin.value%1024,d.runtime.queueDisplayUpdate()}},t.prototype.moveToCoord=function(t){e.translateEl(this.element,[t[0]+c,t[1]+h])},t.prototype.updateTheme=function(){},t.prototype.updateState=function(){this.currentValue===this.pin.value&&this.currentMode==this.pin.mode||(this.currentValue=this.pin.value,this.currentMode=this.pin.mode,this.text.textContent="~"+this.currentValue)},t}();e.PhotoCellView=t}(d.visuals||(d.visuals={}))}(pxsim||(pxsim={})),function(a){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(a.Pin),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.CommonPin=e);t.DigitalInOutPin=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(e);t.AnalogInOutPin=n;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(e);t.PwmOnlyPin=s;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(e);t.PwmPin=r,t.markUsed=function(t){t&&!t.used&&(t.used=!0,a.runtime.queueDisplayUpdate())}}(a.pins||(a.pins={}))}(pxsim||(pxsim={})),function(s){!function(t){function n(t,e,i){s.pins.markUsed(t),t.onEvent(e,i)}t.digitalRead=function(t){return s.pins.markUsed(t),t.digitalReadPin()},t.digitalWrite=function(t,e){s.pins.markUsed(t),t.digitalWritePin(e)},t.onPulsed=function(t,e,i){s.pins.markUsed(t),n(t,e?4:5,i)},t.onEvent=n,t.pulseIn=function(t,e,i){return void 0===i&&(i=2e6),s.pins.markUsed(t),500},t.setPull=function(t,e){s.pins.markUsed(t),t.setPull(e)},t.isPressed=function(t){return s.pins.markUsed(t),t.isTouched()}}(s.DigitalInOutPinMethods||(s.DigitalInOutPinMethods={}))}(pxsim||(pxsim={})),function(e){(e.AnalogInPinMethods||(e.AnalogInPinMethods={})).analogRead=function(t){return e.pins.markUsed(t),t.analogReadPin()}}(pxsim||(pxsim={})),function(i){(i.AnalogOutPinMethods||(i.AnalogOutPinMethods={})).analogWrite=function(t,e){i.pins.markUsed(t),t.analogWritePin(e)}}(pxsim||(pxsim={})),function(i){var t;(t=i.PwmOnlyPinMethods||(i.PwmOnlyPinMethods={})).analogSetPeriod=function(t,e){i.pins.markUsed(t),t.analogSetPeriod(e)},t.servoWrite=function(t,e){i.pins.markUsed(t),t.servoWritePin(e)},t.servoSetPulse=function(t,e){i.pins.markUsed(t),t.servoSetPulse(t.id,e)}}(pxsim||(pxsim={})),function(s){var r;(r=s.pins||(s.pins={})).pinByCfg=function(t){var e=s.pxtcore.getPinCfg(t);return r.markUsed(e),e},r.pulseDuration=function(){return 500},r.createBuffer=function(t){return s.BufferMethods.createBuffer(t)},r.createI2C=function(t,e){var i=s.board();return r.markUsed(t),r.markUsed(e),i&&i.edgeConnectorState&&i.edgeConnectorState.createI2C(t,e)},r.createSPI=function(t,e,i){var n=s.board();return r.markUsed(t),r.markUsed(e),r.markUsed(i),n&&n.edgeConnectorState&&n.edgeConnectorState.createSPI(t,e,i)}}(pxsim||(pxsim={})),function(s){var t;(t=s.I2CMethods||(s.I2CMethods={})).readBuffer=function(t,e,i,n){return s.control.createBuffer(0)},t.writeBuffer=function(t,e,i,n){return 0}}(pxsim||(pxsim={})),function(t){var e;(e=t.SPIMethods||(t.SPIMethods={})).write=function(t,e){return t.write(e)},e.transfer=function(t,e,i){t.transfer(e,i)},e.setFrequency=function(t,e){t.setFrequency(e)},e.setMode=function(t,e){t.setMode(e)}}(pxsim||(pxsim={})),function(t){var e;(e=t.SerialDeviceMethods||(t.SerialDeviceMethods={})).setTxBufferSize=function(t,e){t.setTxBufferSize(e)},e.setRxBufferSize=function(t,e){t.setRxBufferSize(e)},e.read=function(t){return t.read()},e.readBuffer=function(t){return t.readBuffer()},e.writeBuffer=function(t,e){t.writeBuffer(e)},e.setBaudRate=function(t,e){t.setBaudRate(e)},e.redirect=function(t,e,i,n){t.redirect(e,i,n)},e.onEvent=function(t,e,i){t.onEvent(e,i)},e.onDelimiterReceived=function(t,e,i){t.onDelimiterReceived(e,i)}}(pxsim||(pxsim={})),function(s){(s.serial||(s.serial={})).internalCreateSerialDevice=function(t,e,i){var n=s.board();return n&&n.edgeConnectorState?n.edgeConnectorState.createSerialDevice(t,e,i):new s.SerialDevice(t,e,i)}}(pxsim||(pxsim={})),function(e){e.neopixelState=function(t){return e.board().neopixelState(t)}}(pxsim||(pxsim={})),function(d){!function(i){var c=-1,h=-30,l=100,u=100,f='<svg xmlns="http://www.w3.org/2000/svg" width="100mm" height="100mm" viewBox="0 0 100 100" id="svg8">\n    <g id="layer1" transform="translate(0 -197)">\n      <rect id="rect4508-3" width="6.054" height="32.94" x="43.381" y="210.817" rx="2.811" fill="#666" stroke="#000" stroke-width=".309"/>\n      <rect id="rect4508-3-3" width="6.054" height="32.94" x="58.321" y="210.817" rx="2.811" fill="#666" stroke="#000" stroke-width=".309"/>\n      <rect id="rect4508" width="6.054" height="32.94" x="28.44" y="210.817" rx="2.811" fill="#666" stroke="#000" stroke-width=".309"/>\n      <rect id="rect4485" width="100.542" height="40.611" y="237.763" rx="3.432" stroke="#000" stroke-width=".309"/>\n      <rect id="rect4487" width="60.587" height="18.323" x="7.977" y="248.907" rx="2.46" fill="#b3b3b3" stroke="#000" stroke-width=".262"/>\n      <rect id="rect4487-7" width="53.273" height="10.029" x="11.2" y="253.384" rx="2.163" fill="#999" stroke="#000" stroke-width=".182"/>\n      <rect id="handle" width="19.243" height="30.007" x="11.924" y="256.572" rx="3.432" fill="#4d4d4d" stroke="#000" stroke-width=".309"/>\n      <text style="line-height:1.25" x="71.848" y="259.158" id="text" transform="scale(.97895 1.0215)" font-weight="400" font-size="17.409" font-family="sans-serif" letter-spacing="0" word-spacing="0" fill="#fff" stroke-width=".435">\n        <tspan id="tspan4558" x="71.848" y="259.158" style="-inkscape-font-specification:Consolas" font-family="Consolas">OFF</tspan>\n      </text>\n    </g>\n  </svg>\n  ',n='<svg xmlns="http://www.w3.org/2000/svg" width="100mm" height="100mm" viewBox="0 0 100 100" id="svg8">\n  <g id="layer1" transform="translate(0 -197)">\n    <g id="g4509" transform="matrix(1.14409 0 0 1.19383 -7.582 -50.118)">\n      <rect rx="2.457" y="218.57" x="44.544" height="27.592" width="5.292" id="rect4508-3" fill="#666" stroke="#000" stroke-width=".265"/>\n      <rect rx="2.457" y="218.57" x="57.604" height="27.592" width="5.292" id="rect4508-3-3" fill="#666" stroke="#000" stroke-width=".265"/>\n      <rect rx="2.457" y="218.57" x="31.485" height="27.592" width="5.292" id="rect4508" fill="#666" stroke="#000" stroke-width=".265"/>\n      <rect rx="3" y="241.141" x="6.627" height="34.018" width="87.879" id="rect4485" fill="#450" stroke="#000" stroke-width=".265"/>\n      <rect rx="2.15" y="250.476" x="13.6" height="15.348" width="52.957" id="rect4487" fill="#b3b3b3" stroke="#000" stroke-width=".224"/>\n      <rect rx="1.89" y="254.226" x="16.417" height="8.4" width="46.564" id="rect4487-7" fill="#999" stroke="#000" stroke-width=".156"/>\n      <rect rx="3" y="256.897" x="46.189" height="25.135" width="16.82" id="handle" fill="#4d4d4d" stroke="#000" stroke-width=".265"/>\n      <text id="text" y="263.731" x="68.105" style="line-height:1.25" font-weight="400" font-size="14.896" font-family="sans-serif" letter-spacing="0" word-spacing="0" fill="#fff" stroke-width=".372">\n        <tspan style="-inkscape-font-specification:Consolas" y="263.731" x="68.105" id="tspan4558" font-family="Consolas">ON</tspan>\n      </text>\n    </g>\n  </g>\n</svg>\n';i.mkSideSwitchPart=function(t){void 0===t&&(t=[0,0]);var e=t[0],i=t[1],n=e+c,s=i+h,r=l,a=u,o=d.svg.elt("image");return d.svg.hydrate(o,{class:"sim-led",x:n,y:s,width:r,height:a,href:d.svg.toDataUri(f)}),{el:o,x:n,y:s,w:r,h:a}};var t=function(){function t(t){var e=this;this.currentlyOn=!1,this.element=d.svg.elt("g"),this.element.onclick=function(){e.state&&(e.state.toggle(),d.runtime.queueDisplayUpdate())},this.onElement=this.initImage(n),this.offElement=this.initImage(f),this.element.appendChild(this.offElement),this.parsePinString=t}return t.prototype.moveToCoord=function(t){var e=[t[0]+c,t[1]+h];i.translateEl(this.element,e)},t.prototype.init=function(t,e,i,n){this.state=e(this.parsePinString(n.pin)),this.updateState()},t.prototype.updateState=function(){this.state.on()!==this.currentlyOn&&(this.currentlyOn=this.state.on(),this.state.on()?(this.element.removeChild(this.offElement),this.element.appendChild(this.onElement)):(this.element.removeChild(this.onElement),this.element.appendChild(this.offElement)))},t.prototype.updateTheme=function(){},t.prototype.initImage=function(t){var e="data:image/svg+xml,"+encodeURIComponent(t);return i.mkImageSVG({image:e,width:l,height:u,imageUnitDist:15,targetUnitDist:i.PIN_DIST}).el},t}();i.ToggleComponentVisual=t}(d.visuals||(d.visuals={}))}(pxsim||(pxsim={})),function(t){var e=function(){function t(t){this.pin=t}return t.prototype.toggle=function(){var t=!!this.pin.value;this.pin.setValue(t?0:1023)},t.prototype.on=function(){return 0<this.pin.value},t}();t.ToggleState=e}(pxsim||(pxsim={})),function(t){var e;(e=t.gamepad||(t.gamepad={})).setButton=function(t,e){},e.move=function(t,e,i){},e.setThrottle=function(t,e){}}(pxsim||(pxsim={})),function(e){var t;(t=e.network||(e.network={})).infraredSendPacket=function(t){e.getInfraredState().send(t)},t.infraredPacket=function(){return e.getInfraredState().packet},t.onInfraredPacket=function(t){e.getInfraredState().listen(t)},t.onInfraredError=function(t){e.getInfraredState().listenError(t)}}(pxsim||(pxsim={})),function(e){var t=function(){function t(){this.packetReceived=!1,this.IR_COMPONENT_ID=8258,this.IR_PACKET_EVENT=2,this.IR_PACKET_ERROR_EVENT=3}return t.prototype.send=function(t){e.Runtime.postMessage({type:"irpacket",packet:t.data,broadcast:!0})},t.prototype.listen=function(t){e.pxtcore.registerWithDal(this.IR_COMPONENT_ID,this.IR_PACKET_EVENT,t)},t.prototype.listenError=function(t){e.pxtcore.registerWithDal(this.IR_COMPONENT_ID,this.IR_PACKET_ERROR_EVENT,t)},t.prototype.receive=function(t){this.packet=new e.RefBuffer(t),this.packetReceived=!0,e.board().bus.queue(this.IR_COMPONENT_ID,this.IR_PACKET_EVENT)},t}();e.InfraredState=t,e.getInfraredState=function(){return e.board().irState}}(pxsim||(pxsim={})),function(n){var t=function(){function t(t){var e=this;this.running=!1,this.eventId=100,this.board=t,this.packetQueue=[],t.addMessageListener(function(t){return e.processMessage(t)})}return t.prototype.start=function(){this.running=!0},t.prototype.stop=function(){this.running=!1},t.prototype.isConnected=function(){return this.running},t.prototype.isRunning=function(){return this.running},t.prototype.getState=function(){return 0},t.prototype.getPacket=function(){var t=this.packetQueue.shift();if(t){for(var e=n.BufferMethods.createBuffer(t.length),i=0;i<e.data.length;++i)e.data[i]=t[i];return e}},t.prototype.sendPacket=function(t){n.Runtime.postMessage({type:"jacdac",broadcast:!0,packet:n.BufferMethods.getBytes(t)})},t.prototype.processMessage=function(t){var e=n.board();if(this.running&&e&&t&&"jacdac"==t.type){var i=t;this.packetQueue.push(i.packet),e.bus.queue(this.eventId,1)}},t.prototype.getDiagnostics=function(){},t}();n.JacDacState=t,n.getJacDacState=function(){return n.board().jacdacState}}(pxsim||(pxsim={})),function(i){var t;(t=i.jacdac||(i.jacdac={})).__physId=function(){var t=i.getJacDacState();return t?t.eventId:-1},t.__physSendPacket=function(t){var e=i.getJacDacState();e&&e.sendPacket(t)},t.__physGetPacket=function(){var t=i.getJacDacState();return t?t.getPacket():void 0},t.__physIsConnected=function(){var t=i.getJacDacState();return t&&t.isConnected()},t.__physIsRunning=function(){var t=i.getJacDacState();return t&&t.isRunning()},t.__physStart=function(){var t=i.getJacDacState();t&&t.start()},t.__physStop=function(){var t=i.getJacDacState();t&&t.stop()},t.__physGetDiagnostics=function(){var t=i.getJacDacState();return t&&t.getDiagnostics()}}(pxsim||(pxsim={})),function(t){var e,i;e=t.keyboard||(t.keyboard={}),i=["press","up","down"],e.__type=function(t){console.log("kb: type "+t)},e.__key=function(t,e){console.log("kb: key "+t+" "+i[e])},e.__mediaKey=function(t,e){console.log("kb: media "+t+" "+i[e])},e.__functionKey=function(t,e){console.log("kb: function "+t+" "+i[e])}}(pxsim||(pxsim={})),function(e){var t=function(){function t(t,e){void 0===t&&(t=2),void 0===e&&(e=16),this.lines=0,this.columns=0,this.backLightColor="#6e7d6e",this.cursor=!1,this.display=!1,this.blink=!1,this.sensorUsed=!1,this.lines=t,this.columns=e,this.clear()}return t.prototype.clear=function(){for(var t="",e=0;e<this.columns;++e)t+=" ";this.text=[];for(e=0;e<this.lines;++e)this.text.push(t);this.cursorPos=[0,0]},t.prototype.setUsed=function(){this.sensorUsed||(this.sensorUsed=!0,e.runtime.queueDisplayUpdate())},t}();e.LCDState=t,e.lcdState=function(){return e.board().lcdState}}(pxsim||(pxsim={})),function(o){var t,c,h,l,u,f,d,p,g;t=o.lcd||(o.lcd={}),l=8,u=128,f=4,d=h=2,p=c=1,g=[0,64,20,84],t.__write8=function(t,e){var i=o.lcdState();if(i){if(i.setUsed(),e){var n=i.cursorPos[0],s=i.cursorPos[1],r=i.text[s];void 0!==r&&0<=n&&n<r.length&&(i.text[s]=r.substring(0,n)+o.String_.fromCharCode(t)+r.substring(n+1),i.cursorPos[0]++)}else if(t&u){t=~(~t|u);for(var a=g.length-1;0<=a;a--)if((t&g[a])==g[a]||0==a){i.cursorPos[0]=t-g[a],i.cursorPos[1]=a;break}}else t==c?i.clear():(t&l)==l?(i.display=(t&f)==f,i.cursor=(t&d)==d,i.blink=(t&p)==p):t==h&&(i.cursorPos=[0,0]);o.runtime.queueDisplayUpdate()}}}(pxsim||(pxsim={})),function(h){!function(e){e.mkLCDPart=function(t){void 0===t&&(t=[0,0]);var e=t[0],i=t[1],n=a,s=o,r=h.svg.elt("image");return h.svg.hydrate(r,{class:"sim-lcd",x:e,y:i,width:n,height:s,href:h.svg.toDataUri(c)}),{el:r,x:e,y:i,w:n,h:s}};var t=function(){function t(){}return t.prototype.init=function(t,e,i,n){this.state=e,this.bus=t,this.initDom(),this.updateState()},t.prototype.initDom=function(){this.element=h.svg.elt("g"),this.image=(new DOMParser).parseFromString(c,"image/svg+xml").querySelector("svg"),h.svg.hydrate(this.image,{class:"sim-lcd",width:a,height:o}),this.screen=this.image.getElementById("ecran"),this.backlight=this.image.getElementById("backlight"),this.backlight.style.fill="#6e7d6e",this.element.appendChild(this.image)},t.prototype.setChar=function(t,e,i){this.image.getElementById("case"+e+t+"_text").innerHTML=i.charAt(0)},t.prototype.moveToCoord=function(t){e.translateEl(this.element,[t[0],t[1]])},t.prototype.updateTheme=function(){},t.prototype.updateState=function(){for(var t=0;t<this.state.lines;t++)for(var e=0;e<this.state.columns;e++)this.state.text&&this.state.text[t]&&this.state.text[t][e]&&this.setChar(e,t,this.state.text[t][e]);this.backlight.style.fill=this.state.backLightColor},t}();e.LCDView=t;var a=322.79001,o=129.27348,c='\n    <svg xmlns="http://www.w3.org/2000/svg" id="LCD" width="322.8" height="129.3" viewBox="0 0 322.8 129.3">\n    <defs id="defs2284">\n      <style id="style2282">\n        .cls-textCase{fill:#000;fill-opacity:.8;font-family:monospace;font-weight:100;font-size:24px}.cls-case{fill:#fff;fill-opacity:.1}\n      </style>\n    </defs>\n    <path id="rect4820" fill="#6767ff" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".7" d="M.3.3h322.1v128.6H.3z"/>\n    <path id="path132" fill="#303030" stroke-width=".9" d="M308.6 93c-1 0-1.9-.8-1.9-1.8V57.7c0-1 .9-1.8 1.9-1.8V29h-.9l-2.9-2.6v-1H18v1L15.1 29h-1V56h.1c1 0 1.9.8 1.9 1.8v33.5c0 1-.8 1.8-1.9 1.8v26.9h1l2.8 2.6v1h286.8v-1l2.9-2.6h1V93z"/>\n    <g id="g140" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="backlight" d="M319.6 118.3a6 6 0 0 1-6 6h-269a6 6 0 0 1-6-6v-60a6 6 0 0 1 6-6h269a6 6 0 0 1 6 6z" class="cls-backlight"/>\n      <g id="g138" opacity=".2">\n        <path id="path136" fill="#22420d" d="M319.6 58.3v60-60zm-275-6a6 6 0 0 0-6 6v60a6 6 0 0 0 6 6H48a6 6 0 0 1-6-6v-58a6 6 0 0 1 6-6h270c-1-1.1-2.6-2-4.4-2h-269z"/>\n      </g>\n    </g>\n    <g id="g146" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path142" fill="#1a1a1a" d="M322 40.5c0-1-.8-2-1.9-2h-282c-1.1 0-2 1-2 2v1.1c0 1.1.9 2 2 2h282c1 0 2-.9 2-2v-1z"/>\n      <path id="path144" fill="#424242" d="M321 42.3c0-.7-.6-1.3-1.3-1.3h-281c-.9 0-1.5.6-1.5 1.3 0 .7.6 1.3 1.4 1.3h281c.8 0 1.5-.6 1.5-1.3z"/>\n    </g>\n    <g id="g152" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path148" fill="#1a1a1a" d="M322 134c0-1-.8-1.9-1.9-1.9h-282c-1.1 0-2 .9-2 2v1c0 1.1.9 2 2 2h282c1 0 2-.9 2-2v-1z"/>\n      <path id="path150" fill="#424242" d="M321 135.8c0-.7-.6-1.3-1.3-1.3h-281c-.9 0-1.5.6-1.5 1.3 0 .8.6 1.3 1.4 1.3h281c.8 0 1.5-.5 1.5-1.3z"/>\n    </g>\n    <g id="g158" fill-opacity="0" stroke="#f2f2f2" stroke-linecap="round" stroke-opacity=".2" stroke-width=".2" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path154" d="M27 37.4l3.2-3"/>\n      <path id="path156" d="M30.2 143.3l-3.1-3.1"/>\n    </g>\n    <g id="g164" fill-opacity="0" stroke="#f2f2f2" stroke-linecap="round" stroke-opacity=".2" stroke-width=".2" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path160" d="M332.1 37.4l-3.1-3"/>\n      <path id="path162" d="M329 143.3l3-3.1"/>\n    </g>\n    <path id="path166" fill-opacity="0" stroke="#1a1a1a" stroke-opacity=".4" stroke-width="1.3" d="M296.5 101.4c0 2.8-2.6 5.2-5.7 5.2H33c-3 0-5.6-2.4-5.6-5.2v-53c0-2.8 2.5-5.2 5.6-5.2h258c3 0 5.6 2.4 5.6 5.2z"/>\n    <g id="ecran" transform="matrix(1.02697 0 0 1.04868 -20.3 -17.7)">\n      <path id="case10" fill="#fff" fill-opacity=".1" d="M52.9 88.8h14.8v24.4H52.9z" class="cls-case"/>\n      <path id="case11" fill="#fff" fill-opacity=".1" d="M68.7 88.8h14.8v24.4H68.7z" class="cls-case"/>\n      <path id="case12" fill="#fff" fill-opacity=".1" d="M84.6 88.8h14.8v24.4H84.5z" class="cls-case"/>\n      <path id="case13" fill="#fff" fill-opacity=".1" d="M100.4 88.8h14.8v24.4h-14.8z" class="cls-case"/>\n      <path id="case14" fill="#fff" fill-opacity=".1" d="M116.3 88.8H131v24.4h-14.7z" class="cls-case"/>\n      <path id="case15" fill="#fff" fill-opacity=".1" d="M132 88.8H147v24.4H132z" class="cls-case"/>\n      <path id="case16" fill="#fff" fill-opacity=".1" d="M148 88.8h14.7v24.4H148z" class="cls-case"/>\n      <path id="case17" fill="#fff" fill-opacity=".1" d="M163.8 88.8h14.8v24.4h-14.8z" class="cls-case"/>\n      <path id="case18" fill="#fff" fill-opacity=".1" d="M179.6 88.8h14.8v24.4h-14.8z" class="cls-case"/>\n      <path id="case19" fill="#fff" fill-opacity=".1" d="M195.5 88.8h14.7v24.4h-14.7z" class="cls-case"/>\n      <path id="case110" fill="#fff" fill-opacity=".1" d="M211.3 88.8h14.8v24.4h-14.8z" class="cls-case"/>\n      <path id="case111" fill="#fff" fill-opacity=".1" d="M227.1 88.8H242v24.4h-14.8z" class="cls-case"/>\n      <path id="case112" fill="#fff" fill-opacity=".1" d="M243 88.8h14.8v24.4H243z" class="cls-case"/>\n      <path id="case113" fill="#fff" fill-opacity=".1" d="M258.8 88.8h14.8v24.4h-14.8z" class="cls-case"/>\n      <path id="case114" fill="#fff" fill-opacity=".1" d="M274.7 88.8h14.7v24.4h-14.7z" class="cls-case"/>\n      <path id="case115" fill="#fff" fill-opacity=".1" d="M290.5 88.8h14.8v24.4h-14.8z" class="cls-case"/>\n      <text id="case10_text" x="52.9" y="112.9" class="cls-textCase"/>\n      <text id="case11_text" x="68.7" y="112.9" class="cls-textCase"/>\n      <text id="case12_text" x="84.6" y="112.9" class="cls-textCase"/>\n      <text id="case13_text" x="100.4" y="112.9" class="cls-textCase"/>\n      <text id="case14_text" x="116.3" y="112.9" class="cls-textCase"/>\n      <text id="case15_text" x="132.1" y="112.9" class="cls-textCase"/>\n      <text id="case16_text" x="147.9" y="112.9" class="cls-textCase"/>\n      <text id="case17_text" x="163.8" y="112.9" class="cls-textCase"/>\n      <text id="case18_text" x="179.6" y="112.9" class="cls-textCase"/>\n      <text id="case19_text" x="195.5" y="112.9" class="cls-textCase"/>\n      <text id="case110_text" x="211.3" y="112.9" class="cls-textCase"/>\n      <text id="case111_text" x="227.1" y="112.9" class="cls-textCase"/>\n      <text id="case112_text" x="243" y="112.9" class="cls-textCase"/>\n      <text id="case113_text" x="258.8" y="112.9" class="cls-textCase"/>\n      <text id="case114_text" x="274.7" y="112.9" class="cls-textCase"/>\n      <text id="case115_text" x="290.5" y="112.9" class="cls-textCase"/>\n      <path id="case00" fill="#fff" fill-opacity=".1" d="M52.9 63.5h14.8v24.3H52.9z" class="cls-case"/>\n      <path id="case01" fill="#fff" fill-opacity=".1" d="M68.7 63.5h14.8v24.3H68.7z" class="cls-case"/>\n      <path id="case02" fill="#fff" fill-opacity=".1" d="M84.6 63.5h14.8v24.3H84.5z" class="cls-case"/>\n      <path id="case03" fill="#fff" fill-opacity=".1" d="M100.4 63.5h14.8v24.3h-14.8z" class="cls-case"/>\n      <path id="case04" fill="#fff" fill-opacity=".1" d="M116.3 63.5H131v24.3h-14.7z" class="cls-case"/>\n      <path id="case05" fill="#fff" fill-opacity=".1" d="M132 63.5H147v24.3H132z" class="cls-case"/>\n      <path id="case06" fill="#fff" fill-opacity=".1" d="M148 63.5h14.7v24.3H148z" class="cls-case"/>\n      <path id="case07" fill="#fff" fill-opacity=".1" d="M163.8 63.5h14.8v24.3h-14.8z" class="cls-case"/>\n      <path id="case08" fill="#fff" fill-opacity=".1" d="M179.6 63.5h14.8v24.3h-14.8z" class="cls-case"/>\n      <path id="case09" fill="#fff" fill-opacity=".1" d="M195.5 63.5h14.7v24.3h-14.7z" class="cls-case"/>\n      <path id="case010" fill="#fff" fill-opacity=".1" d="M211.3 63.5h14.8v24.3h-14.8z" class="cls-case"/>\n      <path id="case011" fill="#fff" fill-opacity=".1" d="M227.1 63.5H242v24.3h-14.8z" class="cls-case"/>\n      <path id="case012" fill="#fff" fill-opacity=".1" d="M243 63.5h14.8v24.3H243z" class="cls-case"/>\n      <path id="case013" fill="#fff" fill-opacity=".1" d="M258.8 63.5h14.8v24.3h-14.8z" class="cls-case"/>\n      <path id="case014" fill="#fff" fill-opacity=".1" d="M274.7 63.5h14.7v24.3h-14.7z" class="cls-case"/>\n      <path id="case015" fill="#fff" fill-opacity=".1" d="M290.5 63.5h14.8v24.3h-14.8z" class="cls-case"/>\n      <text id="case00_text" x="52.9" y="87.5" class="cls-textCase"/>\n      <text id="case01_text" x="68.7" y="87.5" class="cls-textCase"/>\n      <text id="case02_text" x="84.6" y="87.5" class="cls-textCase"/>\n      <text id="case03_text" x="100.4" y="87.5" class="cls-textCase"/>\n      <text id="case04_text" x="116.3" y="87.5" class="cls-textCase"/>\n      <text id="case05_text" x="132.1" y="87.5" class="cls-textCase"/>\n      <text id="case06_text" x="147.9" y="87.5" class="cls-textCase"/>\n      <text id="case07_text" x="163.8" y="87.5" class="cls-textCase"/>\n      <text id="case08_text" x="179.6" y="87.5" class="cls-textCase"/>\n      <text id="case09_text" x="195.5" y="87.5" class="cls-textCase"/>\n      <text id="case010_text" x="211.3" y="87.5" class="cls-textCase"/>\n      <text id="case011_text" x="227.1" y="87.5" class="cls-textCase"/>\n      <text id="case012_text" x="243" y="87.5" class="cls-textCase"/>\n      <text id="case013_text" x="258.8" y="87.5" class="cls-textCase"/>\n      <text id="case014_text" x="274.7" y="87.5" class="cls-textCase"/>\n      <text id="case015_text" x="290.5" y="87.5" class="cls-textCase"/>\n    </g>\n    <g id="g238" fill="#606060" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path234" d="M25.8 109.3v30.6h.4v-30.7h-.4z"/>\n      <path id="path236" d="M26.2 67.5V36.7h-.4v30.7h.4z"/>\n    </g>\n    <g id="g248" fill="#212121" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path244" d="M25.5 67.3h.4V36.8h-.5v30.6z"/>\n      <path id="path246" d="M25.5 109.3h-.1V140h.5v-30.6h-.4z"/>\n    </g>\n    <path id="path250" fill="#212121" stroke-width=".9" d="M18 123.1h286.8v.5H18z"/>\n    <path id="path252" fill="#606060" stroke-width=".9" d="M18 122.8h286.8v.3H18z"/>\n    <g id="g258" fill="#212121" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path254" d="M332.7 109.3h-.4v30.6h.5v-30.6z"/>\n      <path id="path256" d="M332.7 67.3V36.7h-.4v30.7h.4z"/>\n    </g>\n    <g id="g264" fill="#606060" transform="matrix(.95829 0 0 .88143 -10.2 -3.4)">\n      <path id="path260" d="M332 109.2v30.7h.3v-30.6l-.4-.1z"/>\n      <path id="path262" d="M332.3 67.4V36.7h-.4v30.8l.4-.1z"/>\n    </g>\n    <path id="GND2" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M12 8h9.7v9.7H12z"/>\n    <path id="LCD_DATALINE5" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M175 8h9.7v9.7H175z"/>\n    <path id="rect4824-7" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M145.3 8h9.7v9.7h-9.7z"/>\n    <path id="rect4824-1" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M130.5 8h9.7v9.7h-9.7z"/>\n    <path id="rect4824-2" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M115.7 8h9.7v9.7h-9.7z"/>\n    <path id="rect4824-24" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M100.9 8h9.7v9.7h-9.7z"/>\n    <path id="LCD_ENABLE" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M86.1 8h9.7v9.7h-9.7z"/>\n    <path id="rw" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M71.2 8h9.7v9.7h-9.7z"/>\n    <path id="LCD_RESET" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M56.4 8h9.7v9.7h-9.7z"/>\n    <path id="GND4" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M41.6 8h9.7v9.7h-9.7z"/>\n    <path id="VCC2" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M26.8 8h9.7v9.7h-9.7z"/>\n    <path id="LCD_DATALINE6" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M189.8 8h9.7v9.7h-9.7z"/>\n    <path id="LCD_DATALINE4" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M160.1 8h9.7v9.7h-9.7z"/>\n    <path id="VCC" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M219.4 8h9.7v9.7h-9.7z"/>\n    <path id="LCD_DATALINE7" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M204.6 8h9.7v9.7h-9.7z"/>\n    <path id="GND" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6" d="M234.2 8h9.7v9.7h-9.7z"/>\n  </svg>\n        '}(h.visuals||(h.visuals={}))}(pxsim||(pxsim={})),function(n){var t;(t=n.input||(n.input={})).lightLevel=function(){var t=n.lightSensorState();return t.setUsed(),t.getLevel()},t.onLightConditionChanged=function(t,e){var i=n.lightSensorState();i.setUsed(),n.pxtcore.registerWithDal(i.id,t,e)},t.setLightThreshold=function(t,e){var i=n.lightSensorState();switch(i.setUsed(),t){case 1:i.setLowThreshold(e);break;case 2:i.setHighThreshold(e)}}}(pxsim||(pxsim={})),function(t){t.lightSensorState=function(){return t.board().lightSensorState}}(pxsim||(pxsim={})),function(i){var t;(t=i.input||(i.input={})).soundLevel=function(){var t=i.microphoneState();return t?(t.setUsed(),t.getLevel()):0},t.onLoudSound=function(t){var e=i.microphoneState();e&&(e.setUsed(),i.pxtcore.registerWithDal(e.id,2,t))},t.setLoudSoundThreshold=function(t){var e=i.microphoneState();e&&(e.setUsed(),e.setHighThreshold(t))}}(pxsim||(pxsim={})),function(t){t.microphoneState=function(){return t.board().microphoneState}}(pxsim||(pxsim={})),function(i){var t;(t=i.music||(i.music={})).playInstructions=function(t){return i.AudioContextManager.playInstructionsAsync(t)},t.queuePlayInstructions=function(t,e){i.AudioContextManager.queuePlayInstructions(t,e)},t.stopPlaying=function(){i.AudioContextManager.muteAllChannels()},t.forceOutput=function(t){}}(pxsim||(pxsim={})),function(t){var e;(e=t.mouse||(t.mouse={})).setButton=function(t,e){},e.move=function(t,e){},e.turnWheel=function(t){}}(pxsim||(pxsim={})),function(t){var e=function(){function t(){this.outputDestination_=0,this.volume=100,this.playing=!1}return t.prototype.startPlaying=function(){this.playing=!0},t.prototype.stopPlaying=function(){this.playing=!1},t.prototype.isPlaying=function(){return this.playing},t}();t.AudioState=e}(pxsim||(pxsim={})),function(s){var t;(t=s.music||(s.music={})).noteFrequency=function(t){return t},t.setOutput=function(t){s.getAudioState().outputDestination_=t},t.setVolume=function(t){s.getAudioState().volume=Math.max(0,1024,4*t)},t.setPitchPin=function(t){s.getAudioState().pitchPin_=t},t.setTone=function(t){},t.enableAmp=function(t){},t.playTone=function(t,e){if(s.board()){var i=s.getAudioState();i.outputDestination_,i.startPlaying(),s.runtime.queueDisplayUpdate(),s.AudioContextManager.tone(t,1);var n=s.getResume();e<=0?n():s.runtime.schedule(function(){s.AudioContextManager.stop(),i.stopPlaying(),s.runtime.queueDisplayUpdate(),n()},e)}}}(pxsim||(pxsim={})),function(t){t.getAudioState=function(){return t.board().audioState}}(pxsim||(pxsim={})),function(e){!function(t){t.createRotaryEncoder=function(t,e){return new i(t,e,0)};var i=function(){function t(t,e,i){this.pinA=t,this.pinB=e,this.position=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.pinA.id},enumerable:!0,configurable:!0}),t.prototype.onChanged=function(t){e.control.internalOnEvent(this.id,8755,t)},t}();t.RotaryEncoder=i}(e.encoders||(e.encoders={}))}(pxsim||(pxsim={})),function(t){var e;(e=t.RotaryEncoderMethods||(t.RotaryEncoderMethods={})).onChanged=function(t,e){t.onChanged(e)},e.position=function(t){return t.position}}(pxsim||(pxsim={})),function(t){var e=function(s){function t(t,e,i){var n=s.call(this)||this;return n.dirty=!0,n.isStatic=!1,n.data=new Uint8Array(t*e),n._width=t,n._height=e,n._bpp=i,n}return __extends(t,s),t.prototype.scan=function(t){},t.prototype.gcKey=function(){return"Image"},t.prototype.gcSize=function(){return 4+(this.data.length+3>>3)},t.prototype.gcIsStatic=function(){return this.isStatic},t.prototype.pix=function(t,e){return(0|t)+(0|e)*this._width},t.prototype.inRange=function(t,e){return 0<=(0|t)&&(0|t)<this._width&&0<=(0|e)&&(0|e)<this._height},t.prototype.color=function(t){return 255&t},t.prototype.clamp=function(t,e){return e|=0,(t|=0)<0?t=0:t>=this._width&&(t=this._width-1),e<0?e=0:e>=this._height&&(e=this._height-1),[t,e]},t.prototype.makeWritable=function(){this.dirty=!0},t.prototype.toDebugString=function(){return this._width+"x"+this._height},t}(t.RefObject);t.RefImage=e}(pxsim||(pxsim={})),function(k){!function(t){function s(t){return t<<16>>16}function r(t){return t>>16}function c(t,e,i,n){t.makeWritable(),t.inRange(e,i)&&(t.data[t.pix(e,i)]=t.color(n))}function x(t,e,i,n,s,r){t.makeWritable();var a=t.clamp(e+n-1,i+s-1),o=a[0],c=a[1];e=(l=t.clamp(e,i))[0],i=l[1];var h=t.pix(e,i);n=o-e+1,s=c-i+1;var l,u=t._width-n;for(r=t.color(r);0<s--;){for(var f=0;f<n;++f)t.data[h++]=r;h+=u}}function a(t,e,i,n,s,r){if(!(r.data.length<16)){t.makeWritable();var a=t.clamp(e+n-1,i+s-1),o=a[0],c=a[1];e=(l=t.clamp(e,i))[0],i=l[1];var h=t.pix(e,i);n=o-e+1,s=c-i+1;for(var l,u=t._width-n;0<s--;){for(var f=0;f<n;++f)t.data[h]=r.data[t.data[h]],h++;h+=u}}}function o(t){var e=new k.RefImage(t._width,t._height,t._bpp);return e.data.set(t.data),e}function e(t){for(var e=t._width,i=t._height,n=t.data,s=new k.RefImage(2*e,i,t._bpp),r=s.data,a=0,o=0;o<n.length;++o){var c=n[o];r[a++]=c,r[a++]=c}return s}function i(t){for(var e=t._width,i=t._height,n=t.data,s=new k.RefImage(e,2*i,t._bpp),r=s.data,a=0,o=0,c=e,h=0;h<i;++h){for(var l=0;l<e;++l){var u=n[a++];r[o++]=u,r[c++]=u}o+=e,c+=e}return s}function h(t,e,i,n,s,r){i|=0,n|=0;var a=e._width,o=e._height,c=t._height,h=t._width;if(i+a<=0)return!1;if(h<=i)return!1;if(n+o<=0)return!1;if(c<=n)return!1;s?x(t,i,n,e._width,e._height,0):r||t.makeWritable();for(var l=i<0?Math.min(h,a+i):Math.min(h-i,a),u=e.data,f=t.data,d=0;o--;n++,d+=a)if(0<=n&&n<c){var p=n*h,g=d;i<0?g+=-i:p+=i;for(var m=0;m<l;++m){var v=u[g++];if(v)if(r){if(f[p])return!0}else f[p]=v;p++}}return!1}function l(t,e,i,n){h(t,e,i,n,!1,!1)}function u(t,e,i,n,s,r){var a=n-e,o=s-i,c=t._width;o<0&&(c=-c,o=-o);var h=2*o-a;a<<=1,o<<=1,r=t.color(r);for(var l=t.pix(e,i),u=e;u<=n;++u)t.data[l]=r,0<h&&(l+=c,h-=a),h+=o,l++}function f(t,e,i,n,s,r){var a=n-e,o=s-i,c=1;a<0&&(c=-1,a=-a);var h=2*a-o;a<<=1,o<<=1,r=t.color(r);for(var l=t.pix(e,i),u=i;u<=s;++u)t.data[l]=r,0<h&&(l+=c,h-=o),h+=a,l+=t._width}function d(t,e,i,n,s,r){if(i|=0,s|=0,(n|=0)<(e|=0))d(t,n,s,e,i,r);else{var a=n-e,o=s-i;if(0!=o)if(0!=a){if(!(n<0||e>=t._width)){if(e<0&&(i-=o*e/a|0,e=0),n>=t._width)s+=o*(t._width-1-n)/a|0,n=t._width-1;if(i<s){if(i>=t._height||s<0)return;if(i<0&&(e-=a*i/o|0,i=0),s>=t._height)n+=a*(t._height-1-s)/o|0,s=t._height}else{if(s>=t._height||i<0)return;if(s<0&&(n-=a*s/o|0,s=0),i>=t._height)e+=a*(t._height-1-i)/o|0,i=t._height}t.makeWritable(),o<0?(o=-o)<a?u(t,e,i,n,s,r):f(t,n,s,e,i,r):o<a?u(t,e,i,n,s,r):f(t,e,i,n,s,r)}}else 0<o?x(t,e,i,1,o+1,r):x(t,e,s,1,1-o,r);else 0==a?c(t,e,i,r):x(t,e,i,a+1,1,r)}}function p(t,e,i,n,s){var r=e.data;if(k.image.isValidImage(e)&&1==r[1]){var a=k.image.bufW(r),o=k.image.bufH(r),c=k.image.byteHeight(o,1);i|=0,n|=0;var h=t._height,l=t._width;if(!(i+a<=0||l<=i||n+o<=0||h<=n)){t.makeWritable();var u=8;s=t.color(s);for(var f=t.data,d=0;d<a;++d){var p=i+d;if(0<=p&&p<l){var g=p+n*l,m=u,v=n,x=Math.min(h,o+n);n<0&&(m+=-n>>3,v+=8*(-n>>3));for(var y=1,w=r[m++];v<x;)0<=v&&w&y&&(f[g]=s),256==(y<<=1)&&(y=1,w=r[m++]),g+=l,v++}u+=c}}}}function g(t,e,i,n,s){for(var r=n-1,a=0,o=1,c=1,h=o-(n<<1);a<=r;)x(t,e+r,i-a,1,1+(a<<1),s),x(t,e+a,i-r,1,1+(r<<1),s),x(t,e-r,i-a,1,1+(a<<1),s),x(t,e-a,i-r,1,1+(r<<1),s),h<=0&&(a++,h+=c,c+=2),0<h&&(r--,h+=(o+=2)-(n<<1))}function m(t,e,i,n,s,r){if(e|=0,i|=0,s|=0,r|=0,t.inRange(e,0)&&t.inRange(s,0)&&!(r<=0)){var a=0,o=(n._width<<16)/r|0,c=i+r;for(c>t._height&&(c=t._height),i<0&&(a+=-i*o,i=0);i<c;)t.data[t.pix(e,i)]=n.data[n.pix(s,a>>16)],i++,a+=o}}t.width=function(t){return t._width},t.height=function(t){return t._height},t.isMono=function(t){return 1==t._bpp},t.setPixel=c,t.getPixel=function(t,e,i){return t.inRange(e,i)?t.data[t.pix(e,i)]:0},t.fill=function(t,e){t.makeWritable(),t.data.fill(t.color(e))},t.fillRect=x,t._fillRect=function(t,e,i,n){x(t,s(e),r(e),s(i),r(i),n)},t.mapRect=a,t._mapRect=function(t,e,i,n){a(t,s(e),r(e),s(i),r(i),n)},t.equals=function(t,e){if(!e||t._bpp!=e._bpp||t._width!=e._width||t._height!=e._height)return!1;for(var i=t.data,n=e.data,s=i.length,r=0;r<s;r++)if(i[r]!=n[r])return!1;return!0},t.getRows=function(t,e,i){if(e|=0,t.inRange(e,0))for(var n=0,s=Math.min(i.data.length,(t._width-e)*t._height),r=e,a=0;s--;)a++>=t._height&&(a=0,r=++e),i.data[n++]=t.data[r],r+=t._width},t.setRows=function(t,e,i){if(e|=0,t.inRange(e,0))for(var n=0,s=Math.min(i.data.length,(t._width-e)*t._height),r=e,a=0;s--;)a++>=t._height&&(a=0,r=++e),t.data[r]=i.data[n++],r+=t._width},t.clone=o,t.flipX=function(t){t.makeWritable();for(var e=t._width,i=t._height,n=0;n<i;++n)t.data.subarray(n*e,(n+1)*e).reverse()},t.flipY=function(t){t.makeWritable();for(var e=t._width,i=t._height,n=t.data,s=0;s<e;++s)for(var r=s,a=s+(i-1)*e;r<a;){var o=n[r];n[r]=n[a],n[a]=o,r+=e,a-=e}},t.transposed=function(t){for(var e=t._width,i=t._height,n=t.data,s=new k.RefImage(i,e,t._bpp),r=s.data,a=0,o=0;o<i;++o)for(var c=o,h=0;h<e;++h)r[c]=n[a++],c+=e;return s},t.copyFrom=function(t,e){t._width==e._width&&t._height==e._height&&t._bpp==e._bpp&&t.data.set(e.data)},t.scroll=function(t,e,i){if(t.makeWritable(),i|=0,0!=(e|=0)){var n=o(t);t.data.fill(0),l(t,n,e,i)}else i<0?((i=-i)<t._height?t.data.copyWithin(0,i*t._width):i=t._height,t.data.fill(0,(t._height-i)*t._width)):0<i&&(i<t._height?t.data.copyWithin(i*t._width,0):i=t._height,t.data.fill(0,0,i*t._width))},t.replace=function(t,e,i){i&=15;for(var n=t.data,s=0;s<n.length;++s)n[s]==e&&(n[s]=i)},t.doubledX=e,t.doubledY=i,t.doubled=function(t){return e(i(t))},t.drawImage=function(t,e,i,n){h(t,e,i,n,!0,!1)},t.drawTransparentImage=l,t.overlapsWith=function(t,e,i,n){return h(t,e,i,n,!1,!0)},t._drawLine=function(t,e,i,n){d(t,s(e),r(e),s(i),r(i),n)},t.drawLine=d,t.drawIcon=p,t._drawIcon=function(t,e,i,n){p(t,e,s(i),r(i),n)},t.fillCircle=g,t._fillCircle=function(t,e,i,n){g(t,s(e),r(e),i,n)},t._blitRow=function(t,e,i,n){m(t,s(e),r(e),i,s(n),r(n))},t.blitRow=m}(k.ImageMethods||(k.ImageMethods={}))}(pxsim||(pxsim={})),function(v){!function(t){function d(t,e){return 1==e?t*e+7>>3:t*e+31>>5<<2}function p(t){return t[2]|t[3]<<8}function g(t){return t[4]|t[5]<<8}function m(t){if(!t||t.data.length<5)return!1;if(135!=t.data[0])return!1;if(1!=t.data[1]&&4!=t.data[1])return!1;var e=t.data[1];return 8+p(t.data)*d(g(t.data),e)==t.data.length}function i(t){var e=t.data,i=4,n=0,s=0,r=0;if(!function(t){if(!t||t.data.length<5)return!1;if(225!=t.data[0]&&228!=t.data[0])return!1;var e=15&t.data[0];return 4+t.data[1]*d(t.data[2],e)==t.data.length}(t)?m(t)&&(i=8,n=p(e),s=g(e),r=e[1]):(n=e[1],s=e[2],r=15&e[0]),0==n||0==s)return null;var a=new v.RefImage(n,s,r),o=a.data;if(a.isStatic=t.isStatic,1==r)for(var c=0;c<n;++c)for(var h=c,l=1,u=e[i++],f=0;f<s;++f)256==l&&(l=1,u=e[i++]),u&l&&(o[h]=1),h+=n,l<<=1;else if(4==r)for(c=0;c<n;++c){for(h=c,f=0;f<s>>1;++f){u=e[i++];o[h]=15&u,o[h+=n]=u>>4,h+=n}1&s&&(o[h]=15&e[i++]),i=i+3&-4}return a}function n(t){var e=d(t._height,t._bpp),i=8+t._width*e,n=new Uint8Array(i);n[0]=135,n[1]=t._bpp,n[2]=255&t._width,n[3]=t._width>>8,n[4]=255&t._height,n[5]=t._height>>8;for(var s=8,r=t._width,a=t._height,o=t.data,c=0;c<r;++c)if(4==t._bpp){for(var h=c,l=0;l<a;l+=2)n[s++]=(15&o[h+1])<<4|15&(o[h]||0),h+=2*r;s=s+3&-4}else if(1==t._bpp){var u=1;for(h=c,l=0;l<a;l++)o[h]&&(n[s]|=u),h+=r,256==(u<<=1)&&(u=1,s++);1!=u&&s++}return new v.RefBuffer(n)}t.byteHeight=d,t.bufW=p,t.bufH=g,t.isValidImage=m,t.create=function(t,e){return new v.RefImage(t,e,v.getScreenState().bpp())},t.ofBuffer=i,t.toBuffer=n,t.doubledIcon=function(t){var e=i(t);return e?n(e=v.ImageMethods.doubled(e)):null}}(v.image||(v.image={}))}(pxsim||(pxsim={})),function(i){var t;(t=i.pxtcore||(i.pxtcore={})).updateScreen=function(t){var e=i.getScreenState();e&&e.showImage(t)},t.updateStats=function(t){var e=i.getScreenState();e&&e.updateStats(t)},t.setPalette=function(t){var e=i.getScreenState();e&&e.setPalette(t)},t.setupScreenStatusBar=function(t){var e=i.getScreenState();e&&e.setupScreenStatusBar(t)},t.updateScreenStatusBar=function(t){var e=i.getScreenState();e&&e.updateScreenStatusBar(t)},t.setScreenBrightness=function(t){var e=i.getScreenState();e&&e.setScreenBrightness(t)}}(pxsim||(pxsim={})),function(c){var t=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.width=0,this.height=0,this.lastImageFlushTime=0,this.changed=!0,this.brightness=255,this.onChange=function(){},t||(t=["#000000","#ffffff"]),this.palette=new Uint32Array(t.length);for(var n=0;n<this.palette.length;++n)this.palette[n]=(s=t[n],a=r=void 0,r=new Uint8ClampedArray(4),new Uint32Array(r.buffer),a=parseInt(s.replace(/#/,""),16),r[0]=a>>16&255,r[1]=a>>8&255,r[2]=a>>0&255,r[3]=255,new Uint32Array(r.buffer)[0]);var s,r,a;e&&(this.width=e,this.height=i,this.screen=new Uint32Array(this.width*this.height),this.screen.fill(this.palette[0]))}return t.prototype.setScreenBrightness=function(t){this.brightness=0|t},t.prototype.setPalette=function(t){var e=new Uint8ClampedArray(4),i=new Uint32Array(e.buffer),n=t.data;48!=n.length&&c.pxtrt.panic(911),this.palette=new Uint32Array(n.length/3|0);for(var s=0;s<this.palette.length;++s){var r=3*s;e[0]=n[r+0],e[1]=n[r+1],e[2]=n[r+2],e[3]=255,this.palette[s]=i[0]}},t.prototype.bpp=function(){return 2<this.palette.length?4:1},t.prototype.didChange=function(){var t=this.changed;return this.changed=!1,t},t.prototype.maybeForceUpdate=function(){200<Date.now()-this.lastImageFlushTime&&this.showImage(null)},t.prototype.showImage=function(t){if(c.runtime.startPerfCounter(0),t||(t=this.lastImage),t){if(0==this.width&&(this.width=t._width,this.height=t._height,this.screen=new Uint32Array(this.width*this.height)),this.lastImageFlushTime=Date.now(),t==this.lastImage){if(!t.dirty)return}else this.lastImage=t;this.changed=!0,t.dirty=!1;var e=t.data,i=this.screen;this.width==t._width&&this.height==t._height&&e.length==i.length||c.U.userError("wrong size");for(var n=this.palette,s=n.length-1,r=0;r<e.length;++r)i[r]=n[e[r]&s];this.onChange(),c.runtime.stopPerfCounter(0)}},t.prototype.updateStats=function(t){this.stats=t},t.prototype.bindToSvgImage=function(t){var e=this,i=document.createElement("canvas");i.width=this.width,i.height=this.height;var n=i.getContext("2d");n.imageSmoothingEnabled=!1;var s=n.getImageData(0,0,this.width,this.height),r=new Uint32Array(s.data.buffer),a=function(){o=!1,n.putImageData(s,0,0),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.toDataURL())},o=!1;this.onChange=function(){r.set(e.screen),c.runtime.queueDisplayUpdate(),o||(o=!0,window.requestAnimationFrame(a))}},t.prototype.setupScreenStatusBar=function(t){},t.prototype.updateScreenStatusBar=function(t){},t}();c.ScreenState=t,c.getScreenState=function(){return c.board().screenState}}(pxsim||(pxsim={})),function(h){!function(n){var a=158.439,o=146.803,c='\n  <svg xmlns="http://www.w3.org/2000/svg" id="svg8" width="158.439" height="146.803" viewBox="0 0 158.439 146.803">\n  <g id="layer1" transform="translate(-18.95 -27.866)">\n    <path id="rect4487" fill="#00f" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.306" d="M19.603 28.519h157.133v145.497H19.603z"/>\n    <image id="thescreen" width="136.673" height="109.33" x="26.118" y="61.528" fill="#c8beb7" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width=".427"/>\n    <path id="GND" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M23.177 31.031h11.864v11.864H23.177z"/>\n    <path id="VCC" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M37.119 31.031h11.864v11.864H37.119z"/>\n    <path id="DISPLAY_DC" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M65.004 31.031h11.864v11.864H65.004z"/>\n    <path id="DISPLAY_CS" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M78.947 31.031h11.864v11.864H78.947z"/>\n    <path id="DISPLAY_MOSI" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M92.889 31.031h11.864v11.864H92.889z"/>\n    <path id="DISPLAY_SCK" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M106.831 31.031h11.864v11.864h-11.864z"/>\n    <path id="DISPLAY_MISO" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M120.774 31.031h11.864v11.864h-11.864z"/>\n    <text id="text4619" x="45.309" y="-27.057" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617" x="45.309" y="-27.057">Gnd</tspan>\n    </text>\n    <text id="text4619-4" x="45.51" y="-41.166" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3" x="45.51" y="-41.166">VCC</tspan>\n    </text>\n    <text id="text4619-4-9" x="45.17" y="-69.274" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-1" x="45.17" y="-69.274">D/C</tspan>\n    </text>\n    <text id="text4619-4-9-2" x="45.225" y="-83.064" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-1-5" x="45.225" y="-83.064">CS</tspan>\n    </text>\n    <text id="text4619-4-9-8" x="45.364" y="-97.03" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-1-9" x="45.364" y="-97.03">MOSI</tspan>\n    </text>\n    <text id="text4619-4-9-3" x="45.163" y="-110.996" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-1-7" x="45.163" y="-110.996">SCK</tspan>\n    </text>\n    <text id="text4619-4-9-0" x="46.078" y="-138.962" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-1-72" x="46.078" y="-138.962">BL</tspan>\n    </text>\n    <path id="DISPLAY_RST" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M51.062 31.031h11.864v11.864H51.062z"/>\n    <text id="text4619-4-94" x="44.972" y="-55.132" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-6" x="44.972" y="-55.132">RST</tspan>\n    </text>\n    <path id="DISPLAY_BL" fill="#d4d4d4" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.139" d="M134.638 31.031h11.864v11.864h-11.864z"/>\n    <text id="text4619-4-9-0-6" x="45.403" y="-124.163" fill="#fff" stroke-width=".226" font-family="consolas" font-size="6.63" font-weight="400" letter-spacing="0" style="line-height:1.25;-inkscape-font-specification:consolas" transform="rotate(90)" word-spacing="0">\n      <tspan id="tspan4617-3-1-72-8" x="45.403" y="-124.163">MISO</tspan>\n    </text>\n  </g>\n</svg>\n  ';n.mkScreenPart=function(t){void 0===t&&(t=[0,0]);var e=t[0],i=t[1],n=a,s=o,r=h.svg.elt("image");return h.svg.hydrate(r,{class:"sim-screen",x:e,y:i,width:n,height:s,href:h.svg.toDataUri(c)}),{el:r,x:e,y:i,w:n,h:s}};var t=function(){function t(){}return t.prototype.init=function(t,e,i,n){this.bus=t,this.state=e,this.overElement=void 0,this.defs=[],this.lastLocation=[0,0];var s=h.svg.parseString(c);this.canvas=s.getElementById("thescreen"),this.element=h.svg.elt("g"),this.element.appendChild(s.firstElementChild),this.state.bindToSvgImage(this.canvas)},t.prototype.moveToCoord=function(t){var e=[t[0],t[1]];this.lastLocation=e,this.updateLoc()},t.prototype.updateLoc=function(){var t=this.lastLocation,e=t[0],i=t[1];n.translateEl(this.element,[e,i])},t.prototype.updateState=function(){},t.prototype.updateTheme=function(){},t}();n.ScreenView=t}(h.visuals||(h.visuals={}))}(pxsim||(pxsim={})),function(u){!function(t){var r=0,a=16384;function o(t){return"S/"+t}function c(){var e=o(""),t=u.board().storedState;return Object.keys(t).filter(function(t){return t.slice(0,e.length)==e})}function h(){return c().filter(function(t){return"#"!=t[2]})}function l(){for(var t=0,e=u.board().storedState,i=0,n=c();i<n.length;i++){var s=n[i];t+=s.length+e[s].length}r=t}function e(t){t=o(t);var e=u.board().storedState[t];if(null!=e)return new u.RefBuffer(u.U.stringToUint8Array(atob(e)))}t._set=function(t,e){t=o(t);var i=u.board().storedState[t],n=btoa(u.U.uint8ArrayToString(e.data)),s=null==i?r+t.length+n.length:r+n.length-i.length;return a<s?-1:(u.board().setStoredState(t,n),r=s,0)},t._remove=function(t){t=o(t);var e=u.board().storedState;return null==e[t]?-1:(r-=t.length+e[t].length,u.board().setStoredState(t,null),0)},t._exists=function(t){return null!=e(t)},t._get=e,t._userClean=function(){for(var t=0,e=h();t<e.length;t++){var i=e[t];u.board().setStoredState(i,null)}if(l(),a/4<r){for(var n=0,s=c();n<s.length;n++)i=s[n],u.board().setStoredState(i,null);l()}},t._list=function(t){for(var e=new u.RefCollection,i=o(""),n=0,s="#"==t[0]?c():h();n<s.length;n++){var r=s[n].slice(i.length);r.slice(0,t.length)==t&&e.push(r)}return e}}(u.settings||(u.settings={}))}(pxsim||(pxsim={})),function(t){var e=function(){this.files={}};t.StorageState=e,t.storageState=function(){return t.board().storageState}}(pxsim||(pxsim={})),function(r){var t;(t=r.storage||(r.storage={})).init=function(){},t.appendBuffer=function(t,e){var i=r.storageState(),n=i.files[t];n||(n=i.files[t]=[]);for(var s=0;s<e.data.length;++s)n.push(e.data[s])},t.overwriteWithBuffer=function(t,e){for(var i=r.storageState(),n=[],s=0;s<e.data.length;++s)n.push(e.data[s]);i.files[t]=n},t.exists=function(t){return!!r.storageState().files[t]},t.remove=function(t){delete r.storageState().files[t]},t.size=function(t){var e=r.storageState().files[t];return e?e.length:0},t.readAsBuffer=function(t){var e=r.storageState().files[t];return e?new r.RefBuffer(Uint8Array.from(e)):void 0}}(pxsim||(pxsim={})),function(i){var t=function(){function e(){this.left=!1}return e.prototype.setState=function(t){this.left!==t&&(t?i.board().bus.queue(e.id,2):i.board().bus.queue(e.id,1),this.left=t)},e.prototype.isLeft=function(){return this.left},e.id=3e3,e}();i.SlideSwitchState=t}(pxsim||(pxsim={})),function(i){var t;(t=i.input||(i.input={})).onSwitchMoved=function(t,e){i.pxtcore.registerWithDal(i.SlideSwitchState.id,t,e)},t.switchRight=function(){return!i.board().slideSwitchState.isLeft()}}(pxsim||(pxsim={})),function(e){e.thermometerState=function(){return e.board().thermometerState},e.setThermometerUnit=function(t){e.board().thermometerUnitState=t}}(pxsim||(pxsim={})),function(t){var e;(e=t.TemperatureUnit||(t.TemperatureUnit={}))[e.Celsius=0]="Celsius",e[e.Fahrenheit=1]="Fahrenheit"}(pxsim||(pxsim={})),function(a){var t;(t=a.input||(a.input={})).temperature=function(t){var e=a.thermometerState();e.setUsed(),a.setThermometerUnit(t);var i=e.getLevel();return t==a.TemperatureUnit.Celsius?i:18*i/10+32>>0},t.onTemperatureConditionChanged=function(t,e,i,n){var s=a.thermometerState();s.setUsed(),a.setThermometerUnit(i);var r=i==a.TemperatureUnit.Celsius?e:10*(e-32)/18>>0;2===t?s.setHighThreshold(r):s.setLowThreshold(r),a.pxtcore.registerWithDal(s.id,t,n)}}(pxsim||(pxsim={})),function(n){var t=function(){function t(t){this.capacity=[],this.reading=[],this.mapping=t}return t.prototype.getCap=function(t){return this.mapping[t]},t.prototype.readCap=function(t,e){var i=this.getCap(t);return this.capacitiveSensor(i,e)},t.prototype.isReadingPin=function(t,e){var i=this.getCap(t);return this.reading[i]},t.prototype.isReading=function(t){return this.reading[t]},t.prototype.startReading=function(t,e){var i=this.getCap(t);this.reading[i]=!0,e.mode=n.PinFlags.Analog|n.PinFlags.Input,e.mode|=n.PinFlags.Analog},t.prototype.capacitiveSensor=function(t,e){return this.capacity[t]||0},t.prototype.reset=function(t){this.capacity[t]=0,this.reading[t]=!1},t}();n.CapacitiveSensorState=t;var e=function(i){function t(t){var e=i.call(this,t)||this;return e._threshold=200,e}return __extends(t,i),t.prototype.setThreshold=function(t){this._threshold=t},t.prototype.threshold=function(){return this._threshold},t.prototype.value=function(){return 0},t.prototype.calibrate=function(){},t}(n.CommonButton);n.TouchButton=e;var i=function(t){this.buttons=t.map(function(t){return new e(t)})};n.TouchButtonState=i}(pxsim||(pxsim={})),function(s){(s.pxtcore||(s.pxtcore={})).getTouchButton=function(e){var t=s.board().touchButtonState.buttons.filter(function(t){return t.id==e})[0],i=s.board().edgeConnectorState;if(i){var n=i.pins.filter(function(t){return t.id==e})[0];s.pins.markUsed(n)}return t}}(pxsim||(pxsim={})),function(t){var e;(e=t.TouchButtonMethods||(t.TouchButtonMethods={})).setThreshold=function(t,e){t.setThreshold(e)},e.threshold=function(t){return t.threshold()},e.value=function(t){return t.value()},e.calibrate=function(t){t.calibrate()}}(pxsim||(pxsim={})),function(e){(e.AnalogInOutPinMethods||(e.AnalogInOutPinMethods={})).touchButton=function(t){return e.pxtcore.getTouchButton(t.id)}}(pxsim||(pxsim={}));