var DapJS=function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,n,t){"use strict";var r=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},o=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=this;Object.defineProperty(n,"__esModule",{value:!0}),n.readUInt32LE=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},n.bufferConcat=function(e){for(var t=0,r=0,n=e;r<n.length;r++){t+=(s=n[r]).length}for(var o=new Uint8Array(t),i=t=0,a=e;i<a.length;i++){var s=a[i];o.set(s,t),t+=s.length}return o},n.delay=function(t){return r(i,void 0,void 0,function(){return o(this,function(e){return[2,new Promise(function(e){setTimeout(e,t)})]})})},n.addInt32=function(e,t){return e||(e=[]),e.push(255&t,t>>8&255,t>>16&255,t>>24&255),e},n.hex=function(e){return"0x"+e.toString(16)},n.rid=function(e){return["DP_0x0","DP_0x4","DP_0x8","DP_0xC","AP_0x0","AP_0x4","AP_0x8","AP_0xC"][e]||"?"},n.bank=function(e){return 240&e|4278190080&e},n.apReg=function(e,t){return 4+((12&(e|t|1))>>2)},n.bufToUint32Array=function(e){n.assert(0==(3&e.length));var t=[];if(!e.length)return t;for(var r=t[e.length/4-1]=0;r<t.length;++r)t[r]=n.readUInt32LE(e,r<<2);return t},n.assert=function(e){if(!e)throw new Error("assertion failed")},n.regRequest=function(e,t){void 0===t&&(t=!1);var r=t?0:2;return r|=e<4?0:1,r|=(3&e)<<2},n.hexBytes=function(e){var t=0,r=":";return e.forEach(function(e){return t+=e}),e.push(255&-t),e.forEach(function(e){return r+=("0"+e.toString(16)).slice(-2)}),r.toUpperCase()},n.hex2bin=function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)t[r]=parseInt(e.substr(2*r,2),16);return t}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},o=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.cmd=e.prepareCommand()}return e.prototype.write32=function(e,t){this.cmd.writeAp(0,587202642),this.cmd.writeAp(4,e),this.cmd.writeAp(12,t)},e.prototype.write16=function(e,t){t<<=(2&e)<<3,this.cmd.writeAp(0,587202641),this.cmd.writeAp(4,e),this.cmd.writeAp(12,t)},e.prototype.read32=function(e){this.cmd.writeAp(0,587202642),this.cmd.writeAp(4,e),this.cmd.readAp(12)},e.prototype.read16=function(e){this.cmd.writeAp(0,587202641),this.cmd.writeAp(4,e),this.cmd.readAp(12)},e.prototype.go=function(){return n(this,void 0,void 0,function(){return o(this,function(e){return[2,this.cmd.go()]})})},e}();t.PreparedMemoryCommand=i},function(e,t,r){"use strict";var l=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},f=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=r(7),i=r(1),a=r(0),p=r(3),s=r(8),u=function(){function e(e){this.dev=e,this.memory=new o.Memory(e),this.debug=new n.Debug(this)}return e.prototype.init=function(){return l(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.dev.init()];case 1:return e.sent(),[4,this.debug.init()];case 2:return e.sent(),[4,this.readCoreType()];case 3:return e.sent(),[2]}})})},e.prototype.getState=function(){return l(this,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:return[4,this.memory.read32(3758157296)];case 1:return 33554432&(t=e.sent())?[4,this.memory.read32(3758157296)]:[3,3];case 2:if(33554432&(r=e.sent())&&!(16777216&r))return[2,0];e.label=3;case 3:return 524288&t?[2,1]:262144&t?[2,2]:131072&t?[2,3]:[2,4]}})})},e.prototype.readCoreType=function(){return l(this,void 0,void 0,function(){var t,r,n,o;return f(this,function(e){switch(e.label){case 0:return[4,this.memory.read32(3758157056)];case 1:return t=e.sent(),r=(t&p.CPUID_IMPLEMENTER_MASK)>>p.CPUID_IMPLEMENTER_POS,n=(t&p.CPUID_ARCHITECTURE_MASK)>>p.CPUID_ARCHITECTURE_POS,o=(t&p.CPUID_PARTNO_MASK)>>p.CPUID_PARTNO_POS,console.debug("Found an ARM "+p.CoreNames.get(o)),[2,[r,n,o]]}})})},e.prototype.prepareCommand=function(){return new s.PreparedCortexMCommand(this.dev)},e.prototype.readCoreRegister=function(r){return l(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,this.memory.write32(3758157300,r)];case 1:return e.sent(),[4,this.memory.read32(3758157296)];case 2:return t=e.sent(),a.assert(65536&t),[4,this.memory.read32(3758157304)];case 3:return[2,e.sent()]}})})},e.prototype.writeCoreRegister=function(n,o){return l(this,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:return(t=new i.PreparedMemoryCommand(this.dev)).write32(3758157304,o),t.write32(3758157300,65536|n),t.read32(3758157296),[4,t.go()];case 1:return r=e.sent()[0],a.assert(65536&r),[2]}})})},e.prototype.halt=function(){return l(this,void 0,void 0,function(){return f(this,function(e){return[2,this.memory.write32(3758157296,-1604386813)]})})},e.prototype.resume=function(){return l(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.isHalted()];case 1:return e.sent()?[4,this.memory.write32(3758157104,7)]:[3,4];case 2:return e.sent(),[4,this.debug.enable()];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.isHalted=function(){return l(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.status()];case 1:return[2,e.sent().isHalted]}})})},e.prototype.status=function(){return l(this,void 0,void 0,function(){var t,r,n;return f(this,function(e){switch(e.label){case 0:return(t=new i.PreparedMemoryCommand(this.dev)).read32(3758157296),t.read32(3758157104),[4,t.go()];case 1:return r=e.sent(),n=r[0],[2,{dfsr:r[1],dhscr:n,isHalted:!!(131072&n)}]}})})},e.prototype.reset=function(r){return void 0===r&&(r=!1),l(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return r?[4,this.halt()]:[3,7];case 1:return e.sent(),[4,this.memory.read32(3758157308)];case 2:return t=e.sent(),[4,this.memory.write32(3758157308,1|t)];case 3:return e.sent(),[4,this.softwareReset()];case 4:return e.sent(),[4,this.waitForHalt()];case 5:return e.sent(),[4,this.memory.write32(3758157308,t)];case 6:return e.sent(),[3,9];case 7:return[4,this.softwareReset()];case 8:e.sent(),e.label=9;case 9:return[2]}})})},e.prototype.runCode=function(n,o,i,a,s,u){for(var c=[],e=6;e<arguments.length;e++)c[e-6]=arguments[e];return l(this,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:for((t=this.prepareCommand()).halt(),t.writeCoreRegister(15,i),t.writeCoreRegister(14,a),t.writeCoreRegister(13,s),r=0;r<c.length;r++)t.writeCoreRegister(r,c[r]);return[4,t.go()];case 1:return e.sent(),u?[4,this.memory.writeBlock(o,n)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[4,this.resume()];case 4:return e.sent(),[4,this.waitForHalt(p.DEFAULT_RUNCODE_TIMEOUT)];case 5:return e.sent(),[4,this.readCoreRegister(0)];case 6:return[2,e.sent()]}})})},e.prototype.waitForHalt=function(i){return void 0===i&&(i=0),l(this,void 0,void 0,function(){var t=this;return f(this,function(e){return[2,new Promise(function(n,o){return l(t,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:t=!0,0<i&&setTimeout(function(){t&&(o("waitForHalt timed out."),t=!1)},i),e.label=1;case 1:return(r=t)?[4,this.isHalted()]:[3,3];case 2:r=!e.sent(),e.label=3;case 3:return r?[3,1]:[3,4];case 4:return t&&(t=!1,n()),[2]}})})})]})})},e.prototype.softwareReset=function(){return l(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,this.memory.write32(3758157068,100270084)];case 1:return e.sent(),[4,this.memory.read32(3758157296)];case 2:t=e.sent(),e.label=3;case 3:return 0==(33554432&t)?[3,5]:[4,this.memory.read32(3758157296)];case 4:return t=e.sent(),[3,3];case 5:return[2]}})})},e}();t.CortexM=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RUNCODE_TIMEOUT=1e4,t.CPUID_IMPLEMENTER_MASK=4278190080,t.CPUID_IMPLEMENTER_POS=24,t.CPUID_VARIANT_MASK=15728640,t.CPUID_VARIANT_POS=20,t.CPUID_ARCHITECTURE_MASK=983040,t.CPUID_ARCHITECTURE_POS=16,t.CPUID_PARTNO_MASK=65520,t.CPUID_PARTNO_POS=4,t.CPUID_REVISION_MASK=15,t.CPUID_REVISION_POS=0,t.ISANames=new Map,t.ISANames.set(12,"ARMv6M"),t.ISANames.set(15,"ARMv7M"),t.CoreNames=new Map,t.CoreNames.set(3104,"Cortex-M0"),t.CoreNames.set(3105,"Cortex-M1"),t.CoreNames.set(3107,"Cortex-M3"),t.CoreNames.set(3108,"Cortex-M4"),t.CoreNames.set(3168,"Cortex-M0+")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.CortexM=n.CortexM;var o=r(3);t.CoreNames=o.CoreNames,t.ISANames=o.ISANames;var i=r(9);t.DAP=i.default;var a=r(12);t.FlashTargets=a.FlashTargets,t.FlashTarget=a.FlashTarget;var s=r(15);t.FlashProgram=s.FlashProgram},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},i=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),n=function(){function e(e){this.core=e,this.enabled=!1,this.availableHWBreakpoints=[],this.breakpoints=new Map}return e.prototype.init=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.setupFpb()];case 1:return e.sent(),[2]}})})},e.prototype.enable=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.core.memory.write32(3758157296,-1604386815)];case 1:return e.sent(),[2]}})})},e.prototype.setBreakpoint=function(n){return o(this,void 0,void 0,function(){var t,r;return i(this,function(e){switch(e.label){case 0:return this.breakpoints.has(n)&&"number"!=typeof this.breakpoints.get(n)?(console.warn("Breakpoint at "+n.toString(16)+" already enabled."),[2]):n<536870912?0<this.availableHWBreakpoints.length?this.enabled?[3,2]:(console.log("enabling fpb"),[4,this.setFpbEnabled(!0)]):[3,3]:[3,5];case 1:e.sent(),e.label=2;case 2:return r=this.availableHWBreakpoints.pop(),console.log("using regAddr="+r.toString(16)),t=new a.HWBreakpoint(r,this.core,n),[3,4];case 3:t=new a.SWBreakpoint(this.core,n),e.label=4;case 4:return[3,6];case 5:t=new a.SWBreakpoint(this.core,n),e.label=6;case 6:return[4,t.set()];case 7:return e.sent(),this.breakpoints.set(n,t),[2]}})})},e.prototype.deleteBreakpoint=function(r){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return this.breakpoints.has(r)?"number"==typeof(t=this.breakpoints.get(r))?[3,2]:[4,t.clear()]:[3,3];case 1:e.sent(),t instanceof a.HWBreakpoint&&this.availableHWBreakpoints.push(t.regAddr),e.label=2;case 2:return this.breakpoints.delete(r),[3,4];case 3:console.warn("Breakpoint at "+r.toString(16)+" does not exist."),e.label=4;case 4:return[2]}})})},e.prototype.step=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.core.memory.read32(3758157296)];case 1:return 6&(t=e.sent())?0!=(8&t)?[3,3]:[4,this.core.memory.write32(3758157296,-1604386805)]:(console.error("Target is not halted."),[2]);case 2:e.sent(),e.label=3;case 3:return[4,this.core.memory.write32(3758157296,-1604386803)];case 4:return e.sent(),[4,this.core.waitForHalt()];case 5:return e.sent(),[4,this.core.memory.write32(3758157296,-1604386813)];case 6:return e.sent(),[2]}})})},e.prototype.setupFpb=function(){return o(this,void 0,void 0,function(){var t,r,n,o;return i(this,function(e){switch(e.label){case 0:return[4,this.core.memory.read32(3758104576)];case 1:return t=e.sent(),r=t>>8&112|t>>4&15,n=t>>7&15,this.totalHWBreakpoints=r,console.debug(r+" hardware breakpoints, "+n+" literal comparators"),[4,this.setFpbEnabled(!1)];case 2:e.sent(),o=0,e.label=3;case 3:return o<r?(this.availableHWBreakpoints.push(3758104584+4*o),[4,this.core.memory.write32(3758104584+4*o,0)]):[3,6];case 4:e.sent(),e.label=5;case 5:return o++,[3,3];case 6:return[2]}})})},e.prototype.setFpbEnabled=function(t){return void 0===t&&(t=!0),o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.enabled=t,[4,this.core.memory.write32(3758104576,2|(t?1:0))];case 1:return e.sent(),[2]}})})},e}();t.Debug=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},o=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this.regAddr=e,this.parent=t,this.addr=r}return e.prototype.set=function(){return n(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return t=(2&this.addr?2:1)<<30,[4,this.parent.memory.write32(this.regAddr,536870908&this.addr|t|1)];case 1:return e.sent(),[2]}})})},e.prototype.clear=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.parent.memory.write32(this.regAddr,0)];case 1:return e.sent(),[2]}})})},e}();t.HWBreakpoint=i;var a=function(){function r(e,t){this.parent=e,this.addr=t}return r.prototype.set=function(){return n(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return[4,(t=this).parent.memory.read16(this.addr)];case 1:return t.instruction=e.sent(),[4,this.parent.memory.write16(this.addr,r.BKPT_INSTRUCTION)];case 2:return e.sent(),[2]}})})},r.prototype.clear=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.parent.memory.write16(this.addr,this.instruction)];case 1:return e.sent(),[2]}})})},r.BKPT_INSTRUCTION=48640,r}();t.SWBreakpoint=a},function(e,t,r){"use strict";var i=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},f=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var p=r(0),n=r(1),o=function(){function e(e){this.dev=e}return e.prototype.write32=function(r,n){return i(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return(t=this.dev.prepareCommand()).writeAp(0,587202642),t.writeAp(4,r),t.writeAp(12,n),[4,t.go()];case 1:return e.sent(),[2]}})})},e.prototype.write16=function(r,n){return i(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return n<<=(2&r)<<3,(t=this.dev.prepareCommand()).writeAp(0,587202641),t.writeAp(4,r),t.writeAp(12,n),[4,t.go()];case 1:return e.sent(),[2]}})})},e.prototype.read32=function(r){return i(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:(t=this.dev.prepareCommand()).writeAp(0,587202642),t.writeAp(4,r),t.readAp(12),e.label=1;case 1:return e.trys.push([1,3,,6]),[4,t.go()];case 2:return[2,e.sent()[0]];case 3:return e.sent(),[4,p.delay(100)];case 4:return e.sent(),[4,this.read32(r)];case 5:return[2,e.sent()];case 6:return[2]}})})},e.prototype.read16=function(n){return i(this,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:(t=this.dev.prepareCommand()).writeAp(0,587202641),t.writeAp(4,n),t.readAp(12),e.label=1;case 1:return e.trys.push([1,3,,6]),[4,t.go()];case 2:return r=e.sent()[0],[3,6];case 3:return e.sent(),[4,p.delay(100)];case 4:return e.sent(),[4,this.read16(n)];case 5:return r=e.sent(),[3,6];case 6:return[2,r=r>>((2&n)<<3)&65535]}})})},e.prototype.readBlock=function(u,c,l){return i(this,void 0,void 0,function(){var t,r,n,o,i,a,s;return f(this,function(e){switch(e.label){case 0:t=[],r=u+4*c,n=u,e.label=1;case 1:return n<r?(o=n+l,n===u&&(o&=~(l-1)),i=Math.min(o-n,r-n),p.assert(0==(3&i)),s=(a=t).push,[4,this.readBlockCore(n,i>>2)]):[3,3];case 2:return s.apply(a,[e.sent()]),n=o,[3,1];case 3:return[2,p.bufferConcat(t).subarray(0,4*c)]}})})},e.prototype.writeBlock=function(t,r){return i(this,void 0,void 0,function(){return f(this,function(e){return 0===r.length?[2]:[2,this.writeBlockCore(t,r)]})})},e.prototype.prepareCommand=function(){return new n.PreparedMemoryCommand(this.dev)},e.prototype.readBlockCore=function(a,s){return i(this,void 0,void 0,function(){var t,r,n,o,i;return f(this,function(e){switch(e.label){case 0:return(t=this.dev.prepareCommand()).writeAp(0,587202642),t.writeAp(4,a),[4,t.go()];case 1:e.sent(),0===(r=s%15)&&(r=15),n=[],o=0,e.label=2;case 2:return o<Math.ceil(s/15)?[4,this.dev.readRegRepeat(p.apReg(12,2),o===n.length-1?r:15)]:[3,5];case 3:i=e.sent(),n.push(i),e.label=4;case 4:return o++,[3,2];case 5:return[2,p.bufferConcat(n).subarray(0,4*s)]}})})},e.prototype.writeBlockCore=function(n,o){return i(this,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),(t=this.dev.prepareCommand()).writeAp(0,587202642),t.writeAp(4,n),t.writeRegRepeat(p.apReg(12,0),o),[4,t.go()];case 1:return e.sent(),[3,7];case 2:return(r=e.sent()).dapWait?(console.debug("transfer wait, write block"),[4,p.delay(100)]):[3,5];case 3:return e.sent(),[4,this.writeBlockCore(n,o)];case 4:return[2,e.sent()];case 5:throw r;case 6:return[3,7];case 7:return[2]}})})},e}();t.Memory=o},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},o=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=function(){function e(e){this.cmd=new i.PreparedMemoryCommand(e)}return e.prototype.writeCoreRegister=function(e,t){this.cmd.write32(3758157304,t),this.cmd.write32(3758157300,65536|e)},e.prototype.halt=function(){this.cmd.write32(3758157296,-1604386813)},e.prototype.resume=function(){this.cmd.write32(3758157104,7)},e.prototype.go=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.cmd.go()];case 1:return e.sent(),[2]}})})},e}();t.PreparedCortexMCommand=a},function(e,t,r){"use strict";var s=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},u=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(11),c=r(0),i=function(){function e(e){this.device=e,this.dap=new o.CMSISDAP(e)}return e.prototype.reconnect=function(){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this.dap.disconnect()];case 1:return e.sent(),[4,c.delay(100)];case 2:return e.sent(),[4,this.init()];case 3:return e.sent(),[2]}})})},e.prototype.init=function(){return s(this,void 0,void 0,function(){var t,r,n,o;return u(this,function(e){switch(e.label){case 0:return[4,this.dap.connect()];case 1:return e.sent(),[4,this.readDp(0)];case 2:return t=e.sent(),this.idcode=t,(r=this.prepareCommand()).writeReg(0,4),r.writeDp(2,0),r.writeDp(1,1342177280),n=-1610612736,r.readDp(1),[4,r.go()];case 3:o=e.sent()[0],e.label=4;case 4:return(o&n)===n?[3,6]:[4,this.readDp(1)];case 5:return o=e.sent(),[3,4];case 6:return(r=this.prepareCommand()).writeDp(1,1342181120),r.writeDp(2,0),r.readAp(252),[4,r.go()];case 7:return e.sent(),[2]}})})},e.prototype.writeReg=function(t,r){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.regOp(t,r)]})})},e.prototype.readReg=function(r){return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return[4,this.regOp(r,null)];case 1:return t=e.sent(),[2,c.readUInt32LE(t,3)]}})})},e.prototype.prepareCommand=function(){return new n.PreparedDapCommand(this.dap)},e.prototype.readDp=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.readReg(t)]})})},e.prototype.readAp=function(r){return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return(t=this.prepareCommand()).writeDp(2,c.bank(r)),t.readReg(c.apReg(r,2)),[4,t.go()];case 1:return[2,e.sent()[0]]}})})},e.prototype.writeDp=function(e,t){if(2===e){if(t===this.dpSelect)return Promise.resolve();this.dpSelect=t}return this.writeReg(e,t)},e.prototype.writeAp=function(r,n){return s(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:if(0===r){if(n===this.csw)return[2,Promise.resolve()];this.csw=n}return(t=this.prepareCommand()).writeDp(2,c.bank(r)),t.writeReg(c.apReg(r,0),n),[4,t.go()];case 1:return e.sent(),[2]}})})},e.prototype.close=function(){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,this.device.close()]})})},e.prototype.readRegRepeat=function(i,a){return s(this,void 0,void 0,function(){var t,r,n,o;return u(this,function(e){switch(e.label){case 0:for(c.assert(a<=15),t=c.regRequest(i),r=[0,a],n=0;n<a;++n)r.push(t);return[4,this.dap.cmdNums(5,r)];case 1:if((o=e.sent())[1]!==a)throw new Error("(many) Bad #trans "+o[1]);if(1!==o[2])throw new Error("(many) Bad transfer status "+o[2]);return[2,o.subarray(3,3+4*a)]}})})},e.prototype.writeRegRepeat=function(o,i){return s(this,void 0,void 0,function(){var t,r,n;return u(this,function(e){switch(e.label){case 0:return 59,c.assert(i.length<=59/4),t=c.regRequest(o,!0),r=[0,i.length,0,t],i.forEach(function(e){c.addInt32(r,e)}),[4,this.dap.cmdNums(6,r)];case 1:if(1!==(n=e.sent())[3])throw new Error("(many-wr) Bad transfer status "+n[2]);return[2]}})})},e.prototype.regOp=function(o,i){return s(this,void 0,void 0,function(){var t,r,n;return u(this,function(e){switch(e.label){case 0:return t=c.regRequest(o,null!==i),r=[0,1,t],null!==i&&c.addInt32(r,i),[4,this.dap.cmdNums(5,r)];case 1:if(1!==(n=e.sent())[1])throw console.error("Make sure you have initialised the DAP connection."),new Error("Bad #trans "+n[1]);if(1!==n[2]){if(2===n[2])throw new Error("Transfer wait");throw new Error("Bad transfer status "+n[2])}return[2,n]}})})},e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},a=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),o=function(){function e(e){this.dap=e,this.commands=[[0,1]],this.commandCounts=[0],this.currentCommand=0,this.readCounts=[0]}return e.prototype.writeReg=function(e,t){var r=s.regRequest(e,!0);64<this.commands[this.currentCommand].length+5&&(this.commands.push([0,1]),this.commandCounts.push(0),this.readCounts.push(0),this.currentCommand++),this.commands[this.currentCommand].push(r),s.addInt32(this.commands[this.currentCommand],t),this.commandCounts[this.currentCommand]++},e.prototype.readReg=function(e){var t=s.regRequest(e,!1);64<this.commands[this.currentCommand].length+1&&(this.commands.push([0,1]),this.commandCounts.push(0),this.readCounts.push(0),this.currentCommand++),this.commands[this.currentCommand].push(t),this.commandCounts[this.currentCommand]++,this.readCounts[this.currentCommand]++},e.prototype.writeRegRepeat=function(t,e){var r=this;e.forEach(function(e){r.writeReg(t,e)})},e.prototype.go=function(){return n(this,void 0,void 0,function(){var t,r,n,o,i;return a(this,function(e){switch(e.label){case 0:for(t=[],n=0;n<this.commands.length;n++)this.commands[n][1]=this.commandCounts[n];return[4,this.dap.sendTransfers(this.commands)];case 1:for(r=e.sent(),n=0;n<this.commands.length;n++)for(o=r[n],i=0;i<this.readCounts[n];i++)t.push(s.readUInt32LE(o,3+4*i));return[2,t]}})})},e.prototype.writeDp=function(e,t){if(2===e){if(t===this.dpSelect)return Promise.resolve();this.dpSelect=t}return this.writeReg(e,t)},e.prototype.writeAp=function(e,t){if(this.writeDp(2,s.bank(e)),0===e){if(t===this.csw)return Promise.resolve();this.csw=t}this.writeReg(s.apReg(e,0),t)},e.prototype.readDp=function(e){return this.readReg(e)},e.prototype.readAp=function(e){return this.writeDp(2,s.bank(e)),this.readReg(s.apReg(e,2))},e}();t.PreparedDapCommand=o},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},u=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this.maxSent=1,this.hid=e}return e.prototype.resetTarget=function(){return o(this,void 0,void 0,function(){return u(this,function(e){return[2,this.cmdNums(10,[])]})})},e.prototype.disconnect=function(){return o(this,void 0,void 0,function(){return u(this,function(e){return[2,this.cmdNums(3,[])]})})},e.prototype.sendTransfers=function(s){return o(this,void 0,void 0,function(){var t,r,n,o,i,a;return u(this,function(e){switch(e.label){case 0:if(this.hid.sendMany)return[2,this.hid.sendMany(s.map(function(e){return e.unshift(5),Uint8Array.from(e)})).then(function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(5!=n[0])throw new Error("Bad response for Transfer (many) -> "+n[0])}return e})];t=[],r=0,n=s,e.label=1;case 1:return r<n.length?(o=n[r],a=(i=t).push,[4,this.cmdNums(5,o)]):[3,4];case 2:a.apply(i,[e.sent()]),e.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},e.prototype.cmdNums=function(r,n){return o(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return n.unshift(r),[4,this.send(n)];case 1:if((t=e.sent())[0]!==r)throw new Error("Bad response for "+r+" -> "+t[0]);switch(r){case 2:case 0:case 5:case 6:break;default:if(r<128&&0!==t[1])throw new Error("Bad status for "+r+" -> "+t[1])}return[2,t]}})})},e.prototype.connect=function(){return o(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return console.log("Connecting..."),[4,this.info(254)];case 1:if(!(t=e.sent()))throw new Error("DAP_INFO returned invalid packet count.");return this.maxSent=t,[4,this.cmdNums(17,n.addInt32(null,1e7))];case 2:return e.sent(),[4,this.cmdNums(2,[0])];case 3:if(1!==e.sent()[1])throw new Error("SWD mode not enabled.");return[4,this.cmdNums(17,n.addInt32(null,1e7))];case 4:return e.sent(),[4,this.cmdNums(4,[0,80,0,0,0])];case 5:return e.sent(),[4,this.cmdNums(19,[0])];case 6:return e.sent(),[4,this.jtagToSwd()];case 7:return e.sent(),console.log("Connected"),[2]}})})},e.prototype.jtagToSwd=function(){return o(this,void 0,void 0,function(){var t,r,n;return u(this,function(e){switch(e.label){case 0:r=[[56,255,255,255,255,255,255,255],[16,158,231],[56,255,255,255,255,255,255,255],[8,t=0]],e.label=1;case 1:return t<r.length?(n=r[t],[4,this.swjSequence(n)]):[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.prototype.swjSequence=function(t){return o(this,void 0,void 0,function(){return u(this,function(e){return[2,this.cmdNums(18,t)]})})},e.prototype.info=function(r){return o(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return[4,this.cmdNums(0,[r])];case 1:if(0===(t=e.sent())[1])return[2,null];switch(r){case 240:case 254:case 255:if(1===t[1])return[2,t[2]];if(2===t[1])return[2,t[3]<<8|t[2]]}return[2,t.subarray(2,t[1]+2-1)]}})})},e.prototype.send=function(n){return o(this,void 0,void 0,function(){var t,r;return u(this,function(e){switch(e.label){case 0:return t=Uint8Array.from(n),[4,this.hid.write(t.buffer)];case 1:return e.sent(),[4,this.hid.read()];case 2:return r=e.sent(),[2,new Uint8Array(r.buffer)]}})})},e}();t.CMSISDAP=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(i,a,s,u){return new(s||(s=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})},h=this&&this.__generator||function(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=r(13),u=r(14),c=new Uint32Array([562054796,637580784,1328293121,1149193260,472580169,1113276467,1076037746,140132435,1113276459,1079197731,1076562010,1076052571,140132435,1113276459,1079197731,1076562010,1076052571,140132435,1113276459,1079197731,1076562010,1076052571,140132435,1113276459,1079197731,3339204097,3520217742,721438307,1180946463,1186201758,620701441,1149521169,473580669,2285996035,1129398426,3490851328,570497110,2014003794,1079193857,10174499,168974683,1118912602,1137889781,1163968516,536924647,570473968,1187047416,182,3988292384,68]),l=function(n){function e(e,t){var r=n.call(this,e)||this;return r.platform=t,r.inited=!1,r}return o(e,n),e.prototype.flashInit=function(){return i(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return this.inited?[2]:[4,this.reset(!0)];case 1:return e.sent(),[4,this.writeCoreRegister(16,1<<24)];case 2:return e.sent(),[4,this.writeCoreRegister(9,this.platform.flashAlgo.staticBase)];case 3:return e.sent(),this.platform.flashAlgo.analyzerSupported?[4,this.memory.writeBlock(this.platform.flashAlgo.analyzerAddress,c)]:[3,5];case 4:e.sent(),e.label=5;case 5:return[4,this.runCode(this.platform.flashAlgo.instructions,this.platform.flashAlgo.loadAddress,this.platform.flashAlgo.pcInit,this.platform.flashAlgo.loadAddress+1,this.platform.flashAlgo.stackPointer,!0,0,0,0,0)];case 6:return t=e.sent(),this.inited=!0,[2,t]}})})},e.prototype.eraseChip=function(){return i(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this.inited?[3,2]:[4,this.flashInit()];case 1:e.sent(),e.label=2;case 2:return[4,this.runCode(this.platform.flashAlgo.instructions,this.platform.flashAlgo.loadAddress,this.platform.flashAlgo.pcEraseAll,this.platform.flashAlgo.loadAddress+1,this.platform.flashAlgo.stackPointer,!1,0,0,0)];case 3:return[2,e.sent()]}})})},e.prototype.flash=function(u,c,l){return i(this,void 0,void 0,function(){var t,r,n,o,i,a,s;return h(this,function(e){switch(e.label){case 0:return this.inited?[3,2]:[4,this.flashInit()];case 1:e.sent(),e.label=2;case 2:t=this.platform.flashAlgo.pageSize/4,r=this.platform.flashAlgo.pageBuffers[0],n=c||this.platform.flashAlgo.flashStart,o=0,e.label=3;case 3:return o<u.byteLength?(i=o/4,a=u.subarray(i,i+t),s=n+o,[4,this.memory.writeBlock(r,a)]):[3,6];case 4:return e.sent(),[4,this.runCode(this.platform.flashAlgo.instructions,this.platform.flashAlgo.loadAddress,this.platform.flashAlgo.pcProgramPage,this.platform.flashAlgo.loadAddress+1,this.platform.flashAlgo.stackPointer,!1,s,this.platform.flashAlgo.pageSize,r)];case 5:return e.sent(),l&&l(o/u.byteLength),o+=a.byteLength,[3,3];case 6:return l&&l(1),[2]}})})},e.prototype.program=function(p,d){return i(this,void 0,void 0,function(){var n,o,t,r,i,a,s,u,c,l,f;return h(this,function(e){switch(e.label){case 0:return[4,this.flashInit()];case 1:return e.sent(),[4,this.eraseChip()];case 2:e.sent(),n=p.totalByteLength(),o=0,t=Date.now(),r=function(r){return h(this,function(e){switch(e.label){case 0:return[4,i.flash(r.data,r.address,function(e){var t=r.data.byteLength*e;d((o+t)/n)})];case 1:return e.sent(),o+=r.data.byteLength,[2]}})},i=this,a=0,s=p.sections,e.label=3;case 3:return a<s.length?(u=s[a],[5,r(u)]):[3,6];case 4:e.sent(),e.label=5;case 5:return a++,[3,3];case 6:return c=Date.now(),f=n/(l=c-t),console.debug("Transfer took "+l/1e3+" s"),console.debug("Transfered "+n+" bytes at "+f+" kB/s"),[4,this.flashUnInit()];case 7:return e.sent(),d(1),[2]}})})},e.prototype.flashUnInit=function(){this.inited=!1},e}(a.CortexM);t.FlashTarget=l,t.FlashTargets=new Map,t.FlashTargets.set("0240",new s.K64F),t.FlashTargets.set("9900",new u.NRF51)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={analyzerAddress:536866816,analyzerSupported:!0,flashSize:1048576,flashStart:0,instructions:new Uint32Array([3758800384,103643149,604520552,3539992640,509886552,474599930,704650834,1198576114,1174713712,1175864845,1344336460,2177386802,271119949,1174962632,4028663808,2148007937,1145587758,4175228928,536981768,536919408,1174530044,1198530560,1227470096,1145587751,4172869632,3106686468,1210327296,4026549320,1174731177,4164415488,3171960352,1174713712,1145587742,1176587038,4026558658,1174796381,1209710909,587220040,1757562401,4182175744,4026549765,1177090080,3053370736,1175209477,1176716822,1177110066,1145587728,4177063936,3110553095,570499072,536930765,1176651315,2416068137,1145587721,4186238976,4026549767,1178138626,1208466942,4095764544,4110418032,1224999024,1198547016,1074077696,4,1801807467,1073868800,1242439792,545288208,3204476944,2013284363,671091136,1208602874,4026628097,2970091552,1198530663,1110017,543731976,4026656761,2970091521,3891535977,3891404800,1073872896,1307633965,1175275012,1184515728,4026549840,1174861969,1177596182,2381375677,1178739472,1176520233,4167888896,2970502662,3891480112,584453,1759518279,4059102135,1880226560,1759555904,4042324919,184676608,4211108064,508030987,1208737809,1744847992,537485317,1908951305,4289525759,1772111366,1772138760,2969978752,1759567875,1119699973,3204504043,3888727600,748,1073872896,1174713712,1177044493,4165922816,2970502662,3178251824,537180428,541386747,1908951298,4287166463,59381,1073872896,3104392705,1198530564,1824540710,1610871744,1148930853,1112115,3104441090,3891404900,1611145216,537026634,46162056,536895688,1632133384,3204473224,1174595557,537180426,1636910960,3891994624,1174713648,537180428,509132080,3104849928,1074798168,543535368,1746986998,3624223368,83945940,411911208,3523297960,3890946150,3890814976,1208698369,3489743489,1198530667,3892060160,3104523779,1198530564,3623954703,3489737220,3891798020,3891666944,1074036736,602,1801807467,1106307373,1183335943,1176323604,537180436,2180049085,1177166600,1178093121,4290574335,2970502662,3891480112,1209196575,1744847992,2147547328,1225772033,957105273,1615357961,1225575425,957891705,1619552265,1225400327,4160713160,1174863617,2970118584,1199598008,3758403846,134803720,754990344,3204501981,3888989744,432,1073872896,1308617005,1182969986,588269068,1179665953,4160723460,1183055747,251720123,1180225539,3904745478,3923414512,4222615809,1113651185,1074283129,1118126661,1144901888,3760365060,134540197,3640673712,3931063984,2415988760,1148733455,1610901504,1225662465,2550231496,1925712384,1921554433,1917360133,4273403903,4055582339,3489730304,3889251928,101247910,1144865860,771800832,536924634,59336,270,1073872896,1174713712,3104589325,3178242052,1224941632,1174958536,4160713093,3891723925,1073872896,1308617005,1175930380,3923592733,4175280140,3105726520,2953060356,2381375677,1178215172,2550154785,4280219647,2970502662,3891414576,1209327650,1744847992,537026564,1908951314,4169156104,1225764875,957629561,1745446952,4160708744,1174863463,4055413086,3489730304,1073805512,251720122,536924162,63690,524279812,488906029,3520737024,1177599744,59337,116,1073872896,0,524288,1048576,2097152,4194304,8388608,16777216,16777216,1073872900,0]),loadAddress:536870912,pageBuffers:[536883200,536887296],pageSize:4096,pcEraseAll:536871001,pcEraseSector:536871037,pcInit:536870945,pcProgramPage:536871083,stackPointer:536875008,staticBase:536872084},o=function(){function e(){this.flashAlgo=n}return e.prototype.overrideSecurityBits=function(e,t){var r=new Uint8Array(t.buffer);if(e<=1024&&1040<e+r.byteLength){for(var n=1032;n<1036;n++)255!==r[n-e]&&(r[n-e]=255,console.debug("FCF["+(n-1032)+"] at addr "+n+" changed to "+r[n-e]));254!==r[1036-e]&&(r[1036-e]=254,console.debug("FSEC at addr 1036 changed to 254")),0===r[1037-e]&&console.debug("FOPT set to restricted value 0x00"),255!==r[1038-e]&&(r[1038-e]=255,console.debug("FEPROT at addr 1038 changed to 255")),255!==r[1039-e]&&(r[1039-e]=255,console.debug("FDPROT at addr 1039 changed to 255"))}},e}();t.K64F=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={analyzerAddress:536883200,analyzerSupported:!0,beginData:536879104,flashSize:262144,flashStart:0,instructions:new Uint32Array([3758800384,103643149,604520552,3539992640,509886552,474599930,704650834,1198576114,1198530560,1198530560,1277605232,1616912386,1625300993,1747471652,3489793984,1616912384,4026580336,3891722284,1277080944,1616978178,1116227870,536990466,3758121312,1293574304,4162711552,130050088,536924410,3178258528,1174779384,1209206926,1175724289,1326604353,3305229313,130050104,511102982,1208865272,1614881024,3187164680,4160876544,1208805362,100689984,3490385408,1749633290,3490130176,1242188041,3489662915,487153674,3522758720,18288,1073865984,1073865728,268439552,1073808384,1073808640,1073808896,1850885685,0]),loadAddress:536870912,minProgramLength:4,pageBuffers:[536879104,536880128],pageSize:1024,pcEraseAll:536870953,pcEraseSector:536870985,pcInit:536870945,pcProgramPage:536871025,stackPointer:536875008,staticBase:536871280},o=function(){function e(){this.flashAlgo=n}return e.prototype.overrideSecurityBits=function(e,t){},e}();t.NRF51=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=r(0),m=function(){function e(e,t){this.address=e,this.data=t}return e.prototype.toString=function(){return this.data.byteLength+" bytes @ "+this.address.toString(16)},e}();t.FlashSection=m;var n=function(){function d(e){this.sections=e}return d.fromIntelHex=function(e){for(var t=e.split(/\n/),r=0,n=0,o=null,i=[],a=0;a<t.length;a++){var s=t[a];if(":"!==s.substr(0,1))throw new Error("Invaild line in hex file: "+(a+1));var u=parseInt(s.substr(1,2),16),c=r+parseInt(s.substr(3,4),16),l=parseInt(s.substr(7,2),16),f=s.substr(9,2*u);if(0===l){if(o&&c!==n+o.length/2){var p=h.hex2bin(o);i.push(new m(n,new Uint32Array(p.buffer))),o="",n=c}else o||(n=c,o="");o+=f}else{if(1===l)break;2===l?r=parseInt(f,16)<<4:4===l&&(r=parseInt(f,16)<<16)}}return new d(i)},d.fromBinary=function(e,t){return new d([new m(e,t)])},d.prototype.totalByteLength=function(){return this.sections.map(function(e){return e.data.byteLength}).reduce(function(e,t){return e+t})},d.prototype.toString=function(){return this.sections.toString()},d}();t.FlashProgram=n}]);!function i(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var f=e("react"),a=Math.imul,l=1024,o=256,s="timeout";var n,i,u=function(){function e(e){var t=this;this.flashing=!0,this.pbuf=new pxt.U.PromiseBuffer,this.useSerial=!0,(this.packetIo=e).onData=function(e){t.pbuf.push(e)},this.allocDAP();var o=function(){t.useSerial&&(t.flashing?setTimeout(o,300):t.cmsisdap.cmdNums(131,[]).then(function(e){for(var t=e[1],r="",n=2;n<t+2;++n)r+=String.fromCharCode(e[n]);0<r.length?(pxt.U.nextTick(o),window.postMessage({type:"serial",id:"n/a",data:r},"*")):setTimeout(o,50)},function(e){setTimeout(o,1e3)}))};o()}return e.prototype.allocDAP=function(){var e=new DapJS.DAP({write:function(e){return t.sendPacketAsync(new Uint8Array(e))},close:this.disconnectAsync,read:function(){return r.shiftAsync()}});this.cmsisdap=e.dap,this.cortexM=new DapJS.CortexM(e);var t=this.packetIo,r=this.pbuf},e.prototype.reconnectAsync=function(e){var t=this,r=Promise.resolve();return e||(r=this.packetIo.reconnectAsync().then(function(){return t.allocDAP()})),r.then(function(){return t.cortexM.init()}).then(function(){return t.cmsisdap.cmdNums(130,[0,194,1,0]).then(function(){t.useSerial=!0},function(e){t.useSerial=!1})})},e.prototype.disconnectAsync=function(){return this.packetIo.disconnectAsync()},e}();function c(){return i?i.reconnectAsync(!1).then(function(){return i}):Promise.resolve().then(function(){return i?i.disconnectAsync().finally(function(){i=null}):Promise.resolve()}).then(function(){return n?n.then(function(e){return(t=e).reconnectAsync()}).then(function(){return t}):n=pxt.HF2.mkPacketIOAsync().catch(function(e){return n=null,Promise.reject(e)});var t}).then(function(e){var t=new u(e);return(i=t).reconnectAsync(!0).then(function(){return t})})}function p(){var e=!1;if(pxt.usb.isEnabled)e=!0;else if(pxt.U.isNodeJS)e=!0;else{var t=/forceHexDownload/i.test(window.location.href),r=!!window.Windows;(pxt.BrowserUtils.isLocalHost()&&pxt.Cloud.localToken&&!t||r)&&(e=!0)}return e}function d(){return p()?c():Promise.reject(new Error("no HID"))}new Uint32Array([3187719680,612414960,14951168,1489852610,3506651818,1117991684,3186676216,1259742466,1352485398,754997533,614584572,1360527588,1023360009,1495138341,3506187776,1352410112,738220380,604098812,1352410496,1499201773,3506187264,15541632,3023872,1359436047,788552031,872730876,3522642604,1352212736,704666010,3889221884,1073864704,1284]);var h=new Uint32Array([3187719680,604157424,1243040534,612389020,2425060,771774750,614584572,1360527588,738220380,604033276,612389020,2425060,771774750,604098812,1499222172,3506187264,15541632,3023872,1359436047,788552031,872730876,3522642604,1352212736,704666010,3186675964,1073864704,1284]),m=new Uint32Array([1277670896,1151673984,570462721,2432716581,7770883,604504083,620822553,1089159209,3489671424,1006715003,3522505728,1183580305,2835629669,1349202433,3521856178,144415489,588485378,2600683164,3506717340,536919594,1151159061,2667625968,1293196802,1226131988,1040305928,554779467,1225998795,1079657291,1180909661,587547098,1259357018,1180899538,587547101,1259160413,771758317,1610797543,2583730945,416505925,2466263048,3889312769,4294966252,3988292384,1044,516138696,798746316,3432918353,461845907,3864292196]),y=0;function v(e){var t=Date.now();y||(y=t);var r=("00000"+(t-=y)).slice(-5);pxt.log("HID "+r+": "+e)}var b=536870912,g=536879104,w=536875008;function _(r,u){var n,c=!1;return function(e){v("getting existing flash checksums");var t=o;return e.cortexM.runCode(m,b,b+1,4294967295,w,!0,g,0,l,t).then(function(){return e.cortexM.memory.readBlock(g,2*t,l)})}(u).then(function(e){return n=e,v("write code"),u.cortexM.memory.writeBlock(b,h)}).then(function(){v("convert");var e=ts.pxtc.UF2.newBlockFile();ts.pxtc.UF2.writeHex(e,r.outfiles[pxtc.BINARY_HEX].split(/\r?\n/));var i,t=pxt.U.stringToUint8Array(ts.pxtc.UF2.serializeFile(e)),s=function(e,t){pxt.U.assert(t%256==0);for(var r=[],n=0;n<e.length;){for(var o=e[n],i=new Uint8Array(t),a=o.targetAddr&t-1,s=o.targetAddr-a;n<e.length;++n){var u=e[n];if(u.targetAddr+u.payloadSize>s+t)break;pxt.U.memcpy(i,u.targetAddr-s,u.data,0,u.payloadSize)}var c=pxt.U.flatClone(o);c.data=i,c.targetAddr=s,c.payloadSize=t,r.push(c)}return r}(ts.pxtc.UF2.parseFile(t),l);return v("initial: "+s.length+" pages"),i=n,v("incremental: "+(s=s.filter(function(e){var t=e.targetAddr/l;if(pxt.U.assert((0|t)==t),pxt.U.assert(e.data.length==l),8*t+8>i.length)return!0;var r=pxt.HF2.read32(i,8*t),n=pxt.HF2.read32(i,8*t+4),o=function(e){for(var t=798746316,r=516138696,n=0;n<e.length;n+=4){var o=pxt.HF2.read32(e,n)>>>0;o=a(o,3432918353),r=(r^=o=a(o=o<<15|o>>>17,461845907))<<13|r>>>19,t=a(t=(t^=o)<<13|t>>>19,5)+3864292196>>>0,r=a(r,5)+3864292196>>>0}return[t,r]}(e.data);return r!=o[0]||n!=o[1]})).length+" pages"),Promise.mapSeries(pxt.U.range(s.length),function(r){if(c)return Promise.resolve();var n=s[r];if(268435456<=n.targetAddr)return Promise.resolve();n.targetAddr.toString(16);var e=Promise.resolve(),o=1&r?g:g+l,i=1&r?g+l:g;if(0==r){for(var t=new Uint32Array(n.data.length/4),a=0;a<n.data.length;a+=4)t[a>>2]=pxt.HF2.read32(n.data,a);e=u.cortexM.memory.writeBlock(o,t)}return e.then(function(){return e=n,t=o,(r=u.cortexM.prepareCommand()).halt(),r.writeCoreRegister(15,b+4+1),r.writeCoreRegister(14,b+1),r.writeCoreRegister(13,w),r.writeCoreRegister(0,e.targetAddr),r.writeCoreRegister(1,t),Promise.resolve().then(function(){return r.go()}).then(function(){return u.cortexM.debug.enable()});var e,t,r}).then(function(){var e=s[r+1];if(!e)return Promise.resolve();var t=new Uint32Array(e.data.buffer);return u.cortexM.memory.writeBlock(i,t)}).then(function(){return u.cortexM.waitForHalt(500)}).then(function(){})}).then(function(){return v("flash done"),pxt.tickEvent("hid.flash.done"),u.cortexM.reset(!1)}).then(function(){u.flashing=!1})}).timeout(25e3,s).catch(function(e){return c=!0,Promise.reject(e)})}function x(t,r){var n;return void 0===r&&(r={}),y=0,v("init"),r.showNotification(pxt.U.lf("Downloading...")),pxt.tickEvent("hid.flash.start"),Promise.resolve().then(function(){return i?(i.flashing=!0,Promise.delay(100)):Promise.resolve()}).then(d).then(function(e){return n=e,v("reset"),n.cortexM.init().then(function(){return n.cortexM.reset(!0)}).catch(function(e){return v("trying re-connect"),n.reconnectAsync(!1).then(function(){return n.cortexM.reset(!0)})})}).then(function(){return n.cortexM.memory.readBlock(268439572,1,l)}).then(function(e){return 245760!=pxt.HF2.read32(e,0)?(pxt.tickEvent("hid.flash.uicrfail"),r=t,i=n,a=!1,Promise.resolve().then(function(){return i.cmsisdap.cmdNums(138,[1])}).then(function(e){var t=pxt.U.stringToUint8Array(r.outfiles[pxtc.BINARY_HEX]),n=Array.prototype.slice.call(t),o=function(e){void 0===e&&(e=0);var t=Math.min(n.length,e+62),r=n.slice(e,t);return r.unshift(r.length),i.cmsisdap.cmdNums(140,r).then(function(){return!a&&t<n.length?o(t):Promise.resolve()})};return o()}).then(function(e){return i.cmsisdap.cmdNums(139,[])}).timeout(6e4,s).catch(function(e){return a=!0,i.cmsisdap.cmdNums(137,[]).catch(function(e){}).then(function(){return Promise.reject(e)})})):_(t,n);var r,i,a}).catch(function(e){return pxt.log("flash error: "+e.type),"devicenotfound"===e.type&&r.reportDeviceNotFoundAsync?(pxt.tickEvent("hid.flash.devicenotfound"),r.reportDeviceNotFoundAsync("/device/windows-app/troubleshoot",t)):e.message===s?(pxt.tickEvent("hid.flash.timeout"),i.reconnectAsync(!0).catch(function(e){}).then(function(){return pxt.reportException(e),t.confirmAsync({header:lf("Something went wrong..."),body:lf("One-click download took too long. Please disconnect your {0} from your computer and reconnect it, then manually download your program using drag and drop.",pxt.appTarget.appTheme.boardName||lf("device")),agreeLbl:lf("Ok"),hideCancel:!0})}).then(function(){return pxt.commands.saveOnlyAsync(t)})):e.isUserError?(r.reportError(e.message),Promise.resolve()):(pxt.tickEvent("hid.flash.unknownerror"),pxt.reportException(e),t.confirmAsync({header:pxt.U.lf("Something went wrong..."),body:pxt.U.lf("Please manually download your program to your device using drag and drop. One-click download might work afterwards."),agreeLbl:lf("Ok"),hideCancel:!0}).then(function(){return pxt.commands.saveOnlyAsync(t)}))})}function A(e,t){return void 0===t&&(t={}),x(e,t)}function C(t,r){return void 0===r&&(r={}),pxt.usb.isPairedAsync().then(function(e){return e?x(t,r):pxt.webBluetooth.isPaired()?pxt.webBluetooth.flashAsync(t,r).catch(function(e){return pxt.commands.saveOnlyAsync(t)}):pxt.commands.saveOnlyAsync(t)})}function k(e,t){if(!(0<=pxt.semver.majorCmp(e||"0.0.0","1.0.0"))){pxt.U.toArray(t.querySelectorAll("block[type=device_show_leds]")).concat(pxt.U.toArray(t.querySelectorAll("block[type=device_build_image]"))).concat(pxt.U.toArray(t.querySelectorAll("shadow[type=device_build_image]"))).concat(pxt.U.toArray(t.querySelectorAll("block[type=device_build_big_image]"))).concat(pxt.U.toArray(t.querySelectorAll("shadow[type=device_build_big_image]"))).forEach(function(o){if(!pxt.U.toArray(o.children).filter(function(e){return"field"==e.tagName&&"LEDS"==e.getAttribute("name")})[0]){var i=[[],[],[],[],[]];pxt.U.toArray(o.children).filter(function(e){return"field"==e.tagName&&/^LED\d+$/.test(e.getAttribute("name"))}).forEach(function(e){var t=e.getAttribute("name"),r=parseInt(t[3]),n=parseInt(t[4]);i[n][r]="TRUE"==e.innerHTML?"#":".",o.removeChild(e)});var e=o.ownerDocument.createElement("field");e.setAttribute("name","LEDS");var t="`\n"+i.map(function(e){return e.join("")}).join("\n")+"\n`";e.appendChild(o.ownerDocument.createTextNode(t)),o.insertBefore(e,null)}});var o={};pxt.U.toArray(t.querySelectorAll("variable")).forEach(function(e){return o[e.innerHTML]=e.getAttribute("id")}),pxt.U.toArray(t.querySelectorAll("block[type=radio_on_packet]")).forEach(function(e){var t=e.querySelector("mutation");if(t){var r=JSON.parse(e.getAttribute("renamemap")||"{}"),n=t.getAttribute("callbackproperties");if(n){var o=n.split(",");if(1===o.length){if("receivedNumber"===o[0])e.setAttribute("type","radio_on_number"),e.removeChild(e.querySelector("field[name=receivedNumber]")),i(e,r,"receivedNumber");else{if("receivedString"!==o[0])return;e.setAttribute("type","radio_on_string"),e.removeChild(e.querySelector("field[name=receivedString]")),i(e,r,"receivedString")}e.removeChild(t)}else 2===o.length&&-1!==o.indexOf("receivedNumber")&&-1!==o.indexOf("receivedString")&&(e.setAttribute("type","radio_on_value"),e.removeChild(e.querySelector("field[name=receivedNumber]")),e.removeChild(e.querySelector("field[name=receivedString]")),i(e,r,"name"),i(e,r,"value"),e.removeChild(t))}}}),pxt.U.toArray(t.querySelectorAll("block[type=device_random]")).concat(pxt.U.toArray(t.querySelectorAll("shadow[type=device_random]"))).forEach(function(e){if(!S(e,"min")){var t=e.ownerDocument.createElement("value");t.setAttribute("name","min"),function(e){var t=e.ownerDocument.createElement("shadow");t.setAttribute("type","math_number");var r=e.ownerDocument.createElement("field");r.setAttribute("name","NUM"),r.textContent="0",t.appendChild(r),e.appendChild(t)}(t),e.appendChild(t)}}),pxt.U.toArray(t.querySelectorAll("block[type=math_arithmetic]")).concat(pxt.U.toArray(t.querySelectorAll("shadow[type=math_arithmetic]"))).forEach(function(e){var t=P(e,"OP");if(t&&"DIVIDE"===t.textContent.trim()){e.setAttribute("type","math_js_op"),t.textContent="idiv";var r=e.ownerDocument.createElement("mutation");r.setAttribute("op-type","infix"),e.insertBefore(r,e.firstChild);var n=S(e,"A");n&&n.setAttribute("name","ARG0");var o=S(e,"B");o&&o.setAttribute("name","ARG1")}}),E(t,"math_number_minmax","NUM","SLIDER"),E(t,"device_note","note","name")}function i(e,t,r){var n=e.ownerDocument.createElement("field");n.setAttribute("name","HANDLER_"+r),n.setAttribute("id",o[t[r]||r]),n.appendChild(e.ownerDocument.createTextNode(r)),e.appendChild(n)}}function E(e,t,r,n){pxt.U.toArray(e.querySelectorAll("block[type="+t+"]")).concat(pxt.U.toArray(e.querySelectorAll("shadow[type="+t+"]"))).forEach(function(e){var t=P(e,r);t&&t.setAttribute("name",n)})}function P(e,t){return R(e,t,!0)}function S(e,t){return R(e,t,!1)}function R(e,t,r){for(var n=r?"field":"value",o=0;o<e.children.length;o++){var i=e.children.item(o);if(i.tagName===n&&i.getAttribute("name")===t)return i}}function N(e){var t=pxt.appTarget.appTheme.boardName||"???",r=pxt.appTarget.appTheme.usbDocs,n=f.createElement("div",{className:"ui grid stackable"},f.createElement("div",{className:"column five wide firmware"},f.createElement("div",{className:"ui header"},lf("First time here?")),f.createElement("strong",{className:"ui small"},lf("You must have version 0249 or above of the firmware")),f.createElement("div",{className:"image"},f.createElement("img",{alt:lf("Comic rainbow updating micro:bit firmware"),className:"ui image",src:"./static/download/firmware.png"})),f.createElement("a",{href:r+"/webusb/troubleshoot",target:"_blank"},lf("Check your firmware version here and update if needed"))),f.createElement("div",{className:"column eleven wide instructions"},f.createElement("div",{className:"ui grid"},f.createElement("div",{className:"row"},f.createElement("div",{className:"column"},f.createElement("div",{className:"ui two column grid padded"},f.createElement("div",{className:"column"},f.createElement("div",{className:"ui"},f.createElement("div",{className:"image"},f.createElement("img",{alt:lf("Comic connecting micro:bit to computer"),className:"ui medium rounded image",src:"./static/download/connect.png"})),f.createElement("div",{className:"content"},f.createElement("div",{className:"description"},f.createElement("span",{className:"ui purple circular label"},"1"),f.createElement("strong",null,lf("Connect the {0} to your computer with a USB cable",t)),f.createElement("br",null),f.createElement("span",{className:"ui small"},lf("Use the microUSB port on the top of the {0}",t)))))),f.createElement("div",{className:"column"},f.createElement("div",{className:"ui"},f.createElement("div",{className:"image"},f.createElement("img",{alt:lf("Comic of successful micro:bit connection"),className:"ui medium rounded image",src:"./static/download/pair.png"})),f.createElement("div",{className:"content"},f.createElement("div",{className:"description"},f.createElement("span",{className:"ui purple circular label"},"2"),f.createElement("strong",null,lf("Pair your {0}",t)),f.createElement("br",null),f.createElement("span",{className:"ui small"},lf("Click 'Pair device' below and select BBC micro:bit CMSIS-DAP or DAPLink CMSIS-DAP from the list")))))))))))),o=[];return r&&o.push({label:lf("Help"),icon:"help",className:"lightgrey",url:r+"/webusb"}),e({header:lf("Pair device for one-click downloads"),jsx:n,hasCloseIcon:!0,agreeLbl:lf("Pair device"),agreeIcon:"usb",hideCancel:!0,className:"downloaddialog",buttons:o})}function O(e,t,r){var n=pxt.appTarget.appTheme.boardName||"???",o=pxt.appTarget.appTheme.driveDisplayName||pxt.appTarget.compile.driveName||"???",i=pxt.BrowserUtils.isBrowserDownloadWithinUserContext(),a=!pxt.BrowserUtils.isIE()&&!pxt.BrowserUtils.isEdge(),s=pxt.appTarget.appTheme.usbDocs,u=i?lf("Click 'Download' to open the {0} app.",pxt.appTarget.appTheme.boardName||""):void 0,c=i?void 0:f.createElement("div",{className:"ui grid stackable upload"},f.createElement("div",{className:"column sixteen wide instructions"},f.createElement("div",{className:"ui grid"},f.createElement("div",{className:"row"},f.createElement("div",{className:"column"},f.createElement("div",{className:"ui two column grid padded"},f.createElement("div",{className:"column"},f.createElement("div",{className:"ui"},f.createElement("div",{className:"image"},f.createElement("img",{alt:lf("Comic connecting micro:bit to computer"),className:"ui medium rounded image",src:"./static/download/connect.png"})),f.createElement("div",{className:"content"},f.createElement("div",{className:"description"},f.createElement("span",{className:"ui purple circular label"},"1"),f.createElement("strong",null,lf("Connect the {0} to your computer with a USB cable",n)),f.createElement("br",null),f.createElement("span",{className:"ui small"},lf("Use the microUSB port on the top of the {0}",n)))))),f.createElement("div",{className:"column"},f.createElement("div",{className:"ui"},f.createElement("div",{className:"image"},f.createElement("img",{alt:lf("Comic moving hex file to micro:bit"),className:"ui medium rounded image",src:"./static/download/transfer.png"})),f.createElement("div",{className:"content"},f.createElement("div",{className:"description"},f.createElement("span",{className:"ui purple circular label"},"2"),f.createElement("strong",null,lf("Move the .hex file to the {0}",n)),f.createElement("br",null),f.createElement("span",{className:"ui small"},lf("Locate the downloaded .hex file and drag it to the {0} drive",o)))))))))))),l=[];return a&&l.push({label:i?lf("Download"):e,icon:"download",class:i?"primary":"lightgrey",url:t,fileName:e}),s&&l.push({label:lf("Help"),icon:"help",className:"lightgrey",url:s}),r({header:lf("Download to your {0}",pxt.appTarget.appTheme.boardName),body:u,jsx:c,hasCloseIcon:!0,hideCancel:!0,hideAgree:!0,className:"downloaddialog",buttons:l}).then(function(){})}r.bufferConcat=function(e){for(var t=0,r=0,n=e;r<n.length;r++){t+=(s=n[r]).length}for(var o=new Uint8Array(t),i=t=0,a=e;i<a.length;i++){var s=a[i];o.set(s,t),t+=s.length}return o},pxt.editor.initExtensionsAsync=function(e){function r(e){return e.showModalDialogAsync({header:lf("Can't import microbit.co.uk scripts..."),body:lf("Importing microbit.co.uk programs is not supported in this editor anymore. Please open this script in the https://makecode.microbit.org/v0 editor."),buttons:[{label:lf("Go to the old editor"),url:"https://makecode.microbit.org/v0"}]}).then(function(){return e.openHome()})}pxt.debug("loading microbit target extensions...");var t=Math;t.imul||(t.imul=function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0});var n={hexFileImporters:[{id:"blockly",canImport:function(e){return"microbit.co.uk"==e.meta.cloudId&&"blockly"==e.meta.editor},importAsync:function(e,t){return pxt.tickEvent("import.legacyblocks.redirect"),r(e)}},{id:"td",canImport:function(e){return"microbit.co.uk"==e.meta.cloudId&&"touchdevelop"==e.meta.editor},importAsync:function(e,t){return pxt.tickEvent("import.legacytd.redirect"),r(e)}}]};return pxt.usb.setFilters([{vendorId:3368,productId:516,classCode:255,subclassCode:3}]),!!window.Windows?pxt.commands.deployCoreAsync=A:!p()&&!pxt.webBluetooth.hasPartialFlash()||pxt.BrowserUtils.isPxtElectron()||(pxt.commands.deployCoreAsync=C),n.blocklyPatch=k,n.showUploadInstructionsAsync=O,n.webUsbPairDialogAsync=N,Promise.resolve(n)}},{react:7}],2:[function(e,t,r){"use strict";var u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))c.call(r,a)&&(o[a]=r[a]);if(u){n=u(r);for(var s=0;s<n.length;s++)l.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o}},{}],3:[function(t,r,e){(function(c){"use strict";var l=function(){};if("production"!==c.env.NODE_ENV){var f=t("./lib/ReactPropTypesSecret"),p={},d=Function.call.bind(Object.prototype.hasOwnProperty);l=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function e(e,t,r,n,o){if("production"!==c.env.NODE_ENV)for(var i in e)if(d(e,i)){var a;try{if("function"!=typeof e[i]){var s=Error((n||"React class")+": "+r+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.");throw s.name="Invariant Violation",s}a=e[i](t,i,n,r,null,f)}catch(e){a=e}if(!a||a instanceof Error||l((n||"React class")+": type specification of "+r+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in p)){p[a.message]=!0;var u=o?o():"";l("Failed "+r+" type: "+a.message+(null!=u?u:""))}}}e.resetWarningCache=function(){"production"!==c.env.NODE_ENV&&(p={})},r.exports=e}).call(this,t("_process"))},{"./lib/ReactPropTypesSecret":4,_process:8}],4:[function(e,t,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],5:[function(ke,Ee,e){(function(e){"use strict";"production"!==e.env.NODE_ENV&&function(){var h=ke("object-assign"),o=ke("prop-types/checkPropTypes"),e="function"==typeof Symbol&&Symbol.for,v=e?Symbol.for("react.element"):60103,b=e?Symbol.for("react.portal"):60106,c=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,u=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,f=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,y=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,r="function"==typeof Symbol&&Symbol.iterator,n="@@iterator";function w(e){if(null===e||"object"!=typeof e)return null;var t=r&&e[r]||e[n];return"function"==typeof t?t:null}var _=function(){};function x(e,t,r,n,o,i,a,s){if(_(t),!e){var u=void 0;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,a,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}_=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")};var i=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!e){for(var r=arguments.length,n=Array(2<r?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];(function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0,i="Warning: "+e.replace(/%s/g,function(){return r[o++]});"undefined"!=typeof console&&console.warn(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(n))}},A=function(e,t){for(var r=arguments.length,n=Array(2<r?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(void 0===t)throw new Error("`warningWithoutStack(condition, format, ...args)` requires a warning message argument");if(8<n.length)throw new Error("warningWithoutStack() currently supports at most 8 arguments.");if(!e){if("undefined"!=typeof console){var i=n.map(function(e){return""+e});i.unshift("Warning: "+t),Function.prototype.apply.call(console.error,console,i)}try{var a=0,s="Warning: "+t.replace(/%s/g,function(){return n[a++]});throw new Error(s)}catch(e){}}},a={};function C(e,t){var r=e.constructor,n=r&&(r.displayName||r.name)||"ReactClass",o=n+"."+t;a[o]||(A(!1,"Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,n),a[o]=!0)}var k={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,r){C(e,"forceUpdate")},enqueueReplaceState:function(e,t,r,n){C(e,"replaceState")},enqueueSetState:function(e,t,r,n){C(e,"setState")}},E={};function P(e,t,r){this.props=e,this.context=t,this.refs=E,this.updater=r||k}Object.freeze(E),P.prototype.isReactComponent={},P.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&x(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),this.updater.enqueueSetState(this,e,t,"setState")},P.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var t={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},S=function(e,t){Object.defineProperty(P.prototype,e,{get:function(){i(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var R in t)t.hasOwnProperty(R)&&S(R,t[R]);function N(){}function O(e,t,r){this.props=e,this.context=t,this.refs=E,this.updater=r||k}N.prototype=P.prototype;var T=O.prototype=new N;T.constructor=O,h(T,P.prototype),T.isPureReactComponent=!0;var I={current:null},U={current:null},D=/^(.*)[\\\/]/,j=1;function M(e){if(null==e)return null;if("number"==typeof e.tag&&A(!1,"Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case p:return"ConcurrentMode";case c:return"Fragment";case b:return"Portal";case u:return"Profiler";case s:return"StrictMode";case m:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case f:return"Context.Consumer";case l:return"Context.Provider";case d:return o=(n=e).render,i="ForwardRef",a=o.displayName||o.name||"",n.displayName||(""!==a?i+"("+a+")":i);case y:return M(e.type);case g:var t=(r=e)._status===j?r._result:null;if(t)return M(t)}var r,n,o,i,a;return null}var B={},F=null;function $(e){F=e}B.getCurrentStack=null,B.getStackAddendum=function(){var e="";if(F){var t=M(F.type),r=F._owner;e+=function(e,t,r){var n="";if(t){var o=t.fileName,i=o.replace(D,"");if(/^index\./.test(i)){var a=o.match(D);if(a){var s=a[1];s&&(i=s.replace(D,"")+"/"+i)}}n=" (at "+i+":"+t.lineNumber+")"}else r&&(n=" (created by "+r+")");return"\n    in "+(e||"Unknown")+n}(t,F._source,r&&M(r.type))}var n=B.getCurrentStack;return n&&(e+=n()||""),e};var L={ReactCurrentDispatcher:I,ReactCurrentOwner:U,assign:h};h(L,{ReactDebugCurrentFrame:B,ReactComponentTreeHook:{}});var H=function(e,t){if(!e){for(var r=L.ReactDebugCurrentFrame.getStackAddendum(),n=arguments.length,o=Array(2<n?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];A.apply(void 0,[!1,t+"%s"].concat(o,[r]))}},q=Object.prototype.hasOwnProperty,W={key:!0,ref:!0,__self:!0,__source:!0},z=void 0,V=void 0;function G(e){if(q.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function K(e){if(q.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}var Y=function(e,t,r,n,o,i,a){var s={$$typeof:v,type:e,key:t,ref:r,props:a,_owner:i,_store:{}};return Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,"_self",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(s,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function J(e,t,r){var n=void 0,o={},i=null,a=null,s=null,u=null;if(null!=t)for(n in G(t)&&(a=t.ref),K(t)&&(i=""+t.key),s=void 0===t.__self?null:t.__self,u=void 0===t.__source?null:t.__source,t)q.call(t,n)&&!W.hasOwnProperty(n)&&(o[n]=t[n]);var c,l,f,p,d,h,m=arguments.length-2;if(1===m)o.children=r;else if(1<m){for(var y=Array(m),v=0;v<m;v++)y[v]=arguments[v+2];Object.freeze&&Object.freeze(y),o.children=y}if(e&&e.defaultProps){var b=e.defaultProps;for(n in b)void 0===o[n]&&(o[n]=b[n])}if(i||a){var g="function"==typeof e?e.displayName||e.name||"Unknown":e;i&&(p=o,d=g,(h=function(){z||A(!(z=!0),"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",d)}).isReactWarning=!0,Object.defineProperty(p,"key",{get:h,configurable:!0})),a&&(c=o,l=g,(f=function(){V||A(!(V=!0),"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",l)}).isReactWarning=!0,Object.defineProperty(c,"ref",{get:f,configurable:!0}))}return Y(e,i,a,s,u,U.current,o)}function X(e){return"object"==typeof e&&null!==e&&e.$$typeof===v}var Q=".",Z=":";var ee=!1,te=/\/+/g;function re(e){return(""+e).replace(te,"$&/")}var ne=10,oe=[];function ie(e,t,r,n){if(oe.length){var o=oe.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function ae(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,oe.length<ne&&oe.push(e)}function se(e,t,r){return null==e?0:function e(t,r,n,o){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case v:case b:a=!0}}if(a)return n(o,t,""===r?Q+ue(t,0):r),1;var s=void 0,u=0,c=""===r?Q:r+Z;if(Array.isArray(t))for(var l=0;l<t.length;l++)u+=e(s=t[l],c+ue(s,l),n,o);else{var f=w(t);if("function"==typeof f){f===t.entries&&(ee||H(!1,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead."),ee=!0);for(var p=f.call(t),d=void 0,h=0;!(d=p.next()).done;)u+=e(s=d.value,c+ue(s,h++),n,o)}else if("object"===i){var m;m=" If you meant to render a collection of children, use an array instead."+B.getStackAddendum();var y=""+t;x(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===y?"object with keys {"+Object.keys(t).join(", ")+"}":y,m)}}return u}(e,"",t,r)}function ue(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(r=e.key,n={"=":"=0",":":"=2"},"$"+(""+r).replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var r,n}function ce(e,t,r){var n=e.func,o=e.context;n.call(o,t,e.count++)}function le(e,t,r){var n,o,i=e.result,a=e.keyPrefix,s=e.func,u=e.context,c=s.call(u,t,e.count++);Array.isArray(c)?fe(c,i,r,function(e){return e}):null!=c&&(X(c)&&(o=a+(!(n=c).key||t&&t.key===c.key?"":re(c.key)+"/")+r,c=Y(n.type,o,n.ref,n._self,n._source,n._owner,n.props)),i.push(c))}function fe(e,t,r,n,o){var i="";null!=r&&(i=re(r)+"/");var a=ie(t,i,n,o);se(e,le,a),ae(a)}function pe(e){return"string"==typeof e||"function"==typeof e||e===c||e===p||e===u||e===s||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===y||e.$$typeof===l||e.$$typeof===f||e.$$typeof===d)}function de(){var e=I.current;return null===e&&x(!1,"Hooks can only be called inside the body of a function component. (https://fb.me/react-invalid-hook-call)"),e}var he=void 0;function me(){if(U.current){var e=M(U.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}var ye={};function ve(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=function(e){var t=me();if(!t){var r="string"==typeof e?e:e.displayName||e.name;r&&(t="\n\nCheck the top-level render call using <"+r+">.")}return t}(t);if(!ye[r]){ye[r]=!0;var n="";e&&e._owner&&e._owner!==U.current&&(n=" It was passed a child from "+M(e._owner.type)+"."),$(e),H(!1,'Each child in a list should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.',r,n),$(null)}}}function be(e,t){if("object"==typeof e)if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];X(n)&&ve(n,t)}else if(X(e))e._store&&(e._store.validated=!0);else if(e){var o=w(e);if("function"==typeof o&&o!==e.entries)for(var i=o.call(e),a=void 0;!(a=i.next()).done;)X(a.value)&&ve(a.value,t)}}function ge(e){var t=e.type;if(null!=t&&"string"!=typeof t){var r=M(t),n=void 0;if("function"==typeof t)n=t.propTypes;else{if("object"!=typeof t||t.$$typeof!==d&&t.$$typeof!==y)return;n=t.propTypes}n?($(e),o(n,e.props,"prop",r,B.getStackAddendum),$(null)):void 0===t.PropTypes||he||A(!(he=!0),"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",r||"Unknown"),"function"==typeof t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved||A(!1,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."))}}function we(e,t,r){var n=pe(e);if(!n){var o="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(o+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var i=function(e){if(null!=e&&void 0!==e.__source){var t=e.__source;return"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+"."}return""}(t);o+=i||me();var a=void 0;null===e?a="null":Array.isArray(e)?a="array":void 0!==e&&e.$$typeof===v?(a="<"+(M(e.type)||"Unknown")+" />",o=" Did you accidentally export a JSX literal instead of a component?"):a=typeof e,H(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",a,o)}var s=J.apply(this,arguments);if(null==s)return s;if(n)for(var u=2;u<arguments.length;u++)be(arguments[u],e);return e===c?function(e){$(e);for(var t=Object.keys(e.props),r=0;r<t.length;r++){var n=t[r];if("children"!==n&&"key"!==n){H(!1,"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n);break}}null!==e.ref&&H(!1,"Invalid attribute `ref` supplied to `React.Fragment`."),$(null)}(s):ge(s),s}he=!1;var _e={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return fe(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;var n=ie(null,null,t,r);se(e,ce,n),ae(n)},count:function(e){return se(e,function(){return null},null)},toArray:function(e){var t=[];return fe(e,t,null,function(e){return e}),t},only:function(e){return X(e)||x(!1,"React.Children.only expected to receive a single React element child."),e}},createRef:function(){var e={current:null};return Object.seal(e),e},Component:P,PureComponent:O,createContext:function(e,t){void 0===t?t=null:null!==t&&"function"!=typeof t&&A(!1,"createContext: Expected the optional second argument to be a function. Instead received: %s",t);var r={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},n=(r.Provider={$$typeof:l,_context:r},!1),o=!1,i={$$typeof:f,_context:r,_calculateChangedBits:r._calculateChangedBits};return Object.defineProperties(i,{Provider:{get:function(){return o||H(!(o=!0),"Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?"),r.Provider},set:function(e){r.Provider=e}},_currentValue:{get:function(){return r._currentValue},set:function(e){r._currentValue=e}},_currentValue2:{get:function(){return r._currentValue2},set:function(e){r._currentValue2=e}},_threadCount:{get:function(){return r._threadCount},set:function(e){r._threadCount=e}},Consumer:{get:function(){return n||H(!(n=!0),"Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"),r.Consumer}}}),r.Consumer=i,r._currentRenderer=null,r._currentRenderer2=null,r},forwardRef:function(e){return null!=e&&e.$$typeof===y?A(!1,"forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof e?A(!1,"forwardRef requires a render function but was given %s.",null===e?"null":typeof e):0!==e.length&&2!==e.length&&A(!1,"forwardRef render functions accept exactly two parameters: props and ref. %s",1===e.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=e&&(null!=e.defaultProps||null!=e.propTypes)&&A(!1,"forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"),{$$typeof:d,render:e}},lazy:function(e){var t={$$typeof:g,_ctor:e,_status:-1,_result:null},r=void 0,n=void 0;return Object.defineProperties(t,{defaultProps:{configurable:!0,get:function(){return r},set:function(e){H(!1,"React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),r=e,Object.defineProperty(t,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(e){H(!1,"React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=e,Object.defineProperty(t,"propTypes",{enumerable:!0})}}}),t},memo:function(e,t){return pe(e)||A(!1,"memo: The first argument must be a component. Instead received: %s",null===e?"null":typeof e),{$$typeof:y,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return de().useCallback(e,t)},useContext:function(e,t){var r=de();if(void 0!==t&&H(!1,"useContext() second argument is reserved for future use in React. Passing it is not supported. You passed: %s.%s",t,"number"==typeof t&&Array.isArray(arguments[2])?"\n\nDid you call array.map(useContext)? Calling Hooks inside a loop is not supported. Learn more at https://fb.me/rules-of-hooks":""),void 0!==e._context){var n=e._context;n.Consumer===e?H(!1,"Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):n.Provider===e&&H(!1,"Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return r.useContext(e,t)},useEffect:function(e,t){return de().useEffect(e,t)},useImperativeHandle:function(e,t,r){return de().useImperativeHandle(e,t,r)},useDebugValue:function(e,t){return de().useDebugValue(e,t)},useLayoutEffect:function(e,t){return de().useLayoutEffect(e,t)},useMemo:function(e,t){return de().useMemo(e,t)},useReducer:function(e,t,r){return de().useReducer(e,t,r)},useRef:function(e){return de().useRef(e)},useState:function(e){return de().useState(e)},Fragment:c,StrictMode:s,Suspense:m,createElement:we,cloneElement:function(e,t,r){for(var n=function(e,t,r){null==e&&x(!1,"React.cloneElement(...): The argument must be a React element, but you passed %s.",e);var n=void 0,o=h({},e.props),i=e.key,a=e.ref,s=e._self,u=e._source,c=e._owner;if(null!=t){G(t)&&(a=t.ref,c=U.current),K(t)&&(i=""+t.key);var l=void 0;for(n in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)q.call(t,n)&&!W.hasOwnProperty(n)&&(void 0===t[n]&&void 0!==l?o[n]=l[n]:o[n]=t[n])}var f=arguments.length-2;if(1===f)o.children=r;else if(1<f){for(var p=Array(f),d=0;d<f;d++)p[d]=arguments[d+2];o.children=p}return Y(e.type,i,a,s,u,c,o)}.apply(this,arguments),o=2;o<arguments.length;o++)be(arguments[o],n.type);return ge(n),n},createFactory:function(e){var t=we.bind(null,e);return t.type=e,Object.defineProperty(t,"type",{enumerable:!1,get:function(){return i(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},isValidElement:X,version:"16.8.3",unstable_ConcurrentMode:p,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:L};var xe=Object.freeze({default:_e}),Ae=xe&&_e||xe,Ce=Ae.default||Ae;Ee.exports=Ce}()}).call(this,ke("_process"))},{_process:8,"object-assign":2,"prop-types/checkPropTypes":3}],6:[function(e,t,r){"use strict";var l=e("object-assign"),n="function"==typeof Symbol&&Symbol.for,f=n?Symbol.for("react.element"):60103,c=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,r,n,o,i,a,s){if(!e){if((e=void 0)===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function _(e,t,r){this.props=e,this.context=t,this.refs=w,this.updater=r||g}function x(){}function A(e,t,r){this.props=e,this.context=t,this.refs=w,this.updater=r||g}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&b("85"),this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=_.prototype;var C=A.prototype=new x;C.constructor=A,l(C,_.prototype),C.isPureReactComponent=!0;var k={current:null},E={current:null},P=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,r){var n=void 0,o={},i=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)P.call(t,n)&&!S.hasOwnProperty(n)&&(o[n]=t[n]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===o[n]&&(o[n]=s[n]);return{$$typeof:f,type:e,key:i,ref:a,props:o,_owner:E.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===f}var O=/\/+/g,T=[];function I(e,t,r,n){if(T.length){var o=T.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function U(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,T.length<10&&T.push(e)}function D(e,t,r){return null==e?0:function e(t,r,n,o){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case f:case c:a=!0}}if(a)return n(o,t,""===r?"."+j(t,0):r),1;if(a=0,r=""===r?".":r+":",Array.isArray(t))for(var s=0;s<t.length;s++){var u=r+j(i=t[s],s);a+=e(i,u,n,o)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=v&&t[v]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),s=0;!(i=t.next()).done;)a+=e(i=i.value,u=r+j(i,s++),n,o);else"object"===i&&b("31","[object Object]"==(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return a}(e,"",t,r)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(r=e.key,n={"=":"=0",":":"=2"},"$"+(""+r).replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var r,n}function M(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,r){var n,o,i=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,i,r,function(e){return e}):null!=e&&(N(e)&&(o=a+(!(n=e).key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+r,e={$$typeof:f,type:n.type,key:o,ref:n.ref,props:n.props,_owner:n._owner}),i.push(e))}function F(e,t,r,n,o){var i="";null!=r&&(i=(""+r).replace(O,"$&/")+"/"),D(e,B,t=I(t,i,n,o)),U(t)}function $(){var e=k.current;return null===e&&b("307"),e}var L={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return F(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;D(e,M,t=I(null,null,t,r)),U(t)},count:function(e){return D(e,function(){return null},null)},toArray:function(e){var t=[];return F(e,t,null,function(e){return e}),t},only:function(e){return N(e)||b("143"),e}},createRef:function(){return{current:null}},Component:_,PureComponent:A,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return $().useCallback(e,t)},useContext:function(e,t){return $().useContext(e,t)},useEffect:function(e,t){return $().useEffect(e,t)},useImperativeHandle:function(e,t,r){return $().useImperativeHandle(e,t,r)},useDebugValue:function(){},useLayoutEffect:function(e,t){return $().useLayoutEffect(e,t)},useMemo:function(e,t){return $().useMemo(e,t)},useReducer:function(e,t,r){return $().useReducer(e,t,r)},useRef:function(e){return $().useRef(e)},useState:function(e){return $().useState(e)},Fragment:o,StrictMode:i,Suspense:h,createElement:R,cloneElement:function(e,t,r){null==e&&b("267",e);var n=void 0,o=l({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key);var u=void 0;for(n in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)P.call(t,n)&&!S.hasOwnProperty(n)&&(o[n]=void 0===t[n]&&void 0!==u?u[n]:t[n])}if(1===(n=arguments.length-2))o.children=r;else if(1<n){u=Array(n);for(var c=0;c<n;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:f,type:e.type,key:i,ref:a,props:o,_owner:s}},createFactory:function(e){var t=R.bind(null,e);return t.type=e,t},isValidElement:N,version:"16.8.3",unstable_ConcurrentMode:p,unstable_Profiler:a,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:k,ReactCurrentOwner:E,assign:l}},H=L;t.exports=H.default||H},{"object-assign":2}],7:[function(t,r,e){(function(e){"use strict";"production"===e.env.NODE_ENV?r.exports=t("./cjs/react.production.min.js"):r.exports=t("./cjs/react.development.js")}).call(this,t("_process"))},{"./cjs/react.development.js":5,"./cjs/react.production.min.js":6,_process:8}],8:[function(e,t,r){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],f=!1,p=-1;function d(){f&&c&&(f=!1,c.length?l=c.concat(l):p=-1,l.length&&h())}function h(){if(!f){var e=u(d);f=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||f||u(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}]},{},[1]);